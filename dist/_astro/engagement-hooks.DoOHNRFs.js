import{r as e}from"./react-core.INjS0cla.js";import{r as F,u as D,a as q}from"./visibility-hooks.jtbk9uXx.js";const I=({elementRef:u,tapThreshold:E=10,longPressDelay:L=500,swipeThreshold:R=50,preventDefaultOnTouch:g=!1,onTouchStart:k=()=>{},onTouchEnd:b=()=>{},onTouchMove:o=()=>{},onTap:C=()=>{},onLongPress:h=()=>{},onSwipe:a=()=>{}}={})=>{const t=e.useRef({active:!1,startX:0,startY:0,startTime:0,moved:!1,longPressTriggered:!1}),f=e.useRef(null),d=e.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]),m=e.useCallback(()=>{t.current={active:!1,startX:0,startY:0,startTime:0,moved:!1,longPressTriggered:!1},d()},[d]),i=e.useCallback((p,v)=>{const T=p-t.current.startX,w=v-t.current.startY,r=Math.hypot(T,w),n=Date.now()-t.current.startTime;let l=null;return Math.abs(T)>Math.abs(w)?l=T>0?"right":"left":l=w>0?"down":"up",{deltaX:T,deltaY:w,distance:r,duration:n,direction:l}},[]);return e.useEffect(()=>{const p=F(u);if(!p)return;const v=n=>{const l=n.touches[0];l&&(t.current={active:!0,startX:l.clientX,startY:l.clientY,startTime:Date.now(),moved:!1,longPressTriggered:!1},g&&n.preventDefault(),k(n,{x:l.clientX,y:l.clientY,timestamp:t.current.startTime}),f.current=setTimeout(()=>{t.current.active&&!t.current.moved&&(t.current.longPressTriggered=!0,h(n,{x:t.current.startX,y:t.current.startY,duration:Date.now()-t.current.startTime}))},L))},T=n=>{const l=n.touches[0];if(!l||!t.current.active)return;const S=l.clientX-t.current.startX,s=l.clientY-t.current.startY,c=Math.hypot(S,s);!t.current.moved&&c>E&&(t.current.moved=!0,d()),g&&n.preventDefault(),o(n,{x:l.clientX,y:l.clientY,deltaX:S,deltaY:s,distance:c,moved:t.current.moved})},w=n=>{const l=n.changedTouches[0];if(!l)return;g&&n.preventDefault();const S=Date.now()-t.current.startTime,s={x:l.clientX,y:l.clientY,duration:S,moved:t.current.moved,longPressTriggered:t.current.longPressTriggered};if(b(n,s),!t.current.moved&&!t.current.longPressTriggered&&C(n,s),t.current.moved){const c=i(l.clientX,l.clientY);c.distance>=R&&a(n,{...s,...c})}m()},r=n=>{b(n,{x:t.current.startX,y:t.current.startY,duration:Date.now()-t.current.startTime,moved:t.current.moved,longPressTriggered:t.current.longPressTriggered}),m()};return p.addEventListener("touchstart",v,{passive:!g}),p.addEventListener("touchmove",T,{passive:!g}),p.addEventListener("touchend",w,{passive:!g}),p.addEventListener("touchcancel",r,{passive:!0}),()=>{p.removeEventListener("touchstart",v),p.removeEventListener("touchmove",T),p.removeEventListener("touchend",w),p.removeEventListener("touchcancel",r),d()}},[u,E,L,R,g,k,b,o,C,h,a,i,m,d]),e.useEffect(()=>()=>d(),[d]),{isTouchActive:()=>t.current.active,getTouchState:()=>({...t.current}),resetTouchState:m}},U=({elementRef:u,pointerTypes:E=["mouse","touch","pen"],clickThreshold:L=10,longPressDelay:R=500,preventDefaultOnPointer:g=!1,onPointerDown:k=()=>{},onPointerUp:b=()=>{},onPointerMove:o=()=>{},onPointerCancel:C=()=>{},onPointerClick:h=()=>{},onPointerLongPress:a=()=>{}}={})=>{const t=e.useRef(new Map),f=e.useRef(new Map),d=e.useCallback(i=>{const p=f.current.get(i);p&&(clearTimeout(p),f.current.delete(i))},[]),m=e.useCallback(()=>{f.current.forEach(i=>clearTimeout(i)),f.current.clear()},[]);return e.useEffect(()=>{const i=F(u);if(!i)return;const p=r=>{if(!E.includes(r.pointerType))return;const n=r.pointerId,l={startX:r.clientX,startY:r.clientY,startTime:Date.now(),moved:!1,pointerType:r.pointerType};t.current.set(n,l),g&&r.preventDefault(),k(r,{pointerId:n,x:r.clientX,y:r.clientY,pointerType:r.pointerType,timestamp:l.startTime});const S=setTimeout(()=>{const s=t.current.get(n);s&&!s.moved&&a(r,{pointerId:n,x:s.startX,y:s.startY,pointerType:s.pointerType,duration:Date.now()-s.startTime})},R);f.current.set(n,S)},v=r=>{if(!E.includes(r.pointerType))return;const n=r.pointerId,l=t.current.get(n);if(!l)return;const S=r.clientX-l.startX,s=r.clientY-l.startY,c=Math.hypot(S,s);!l.moved&&c>L&&(l.moved=!0,d(n)),g&&r.preventDefault(),o(r,{pointerId:n,x:r.clientX,y:r.clientY,pointerType:r.pointerType,deltaX:S,deltaY:s,distance:c,moved:l.moved})},T=r=>{if(!E.includes(r.pointerType))return;const n=r.pointerId,l=t.current.get(n);if(!l)return;const S=Date.now()-l.startTime;d(n),g&&r.preventDefault();const s={pointerId:n,x:r.clientX,y:r.clientY,pointerType:r.pointerType,duration:S,moved:l.moved};b(r,s),l.moved||h(r,s),t.current.delete(n)},w=r=>{if(!E.includes(r.pointerType))return;const n=r.pointerId;d(n),C(r,{pointerId:n,x:r.clientX,y:r.clientY,pointerType:r.pointerType}),t.current.delete(n)};return i.addEventListener("pointerdown",p,{passive:!g}),i.addEventListener("pointermove",v,{passive:!g}),i.addEventListener("pointerup",T,{passive:!g}),i.addEventListener("pointercancel",w,{passive:!0}),()=>{i.removeEventListener("pointerdown",p),i.removeEventListener("pointermove",v),i.removeEventListener("pointerup",T),i.removeEventListener("pointercancel",w),m()}},[u,E,L,R,g,k,o,b,C,h,a,d,m]),e.useEffect(()=>()=>m(),[m]),{getActivePointers:()=>Array.from(t.current.keys()),getPointerState:i=>t.current.get(i),clearAllTimers:m}};function V({ref:u,active:E=!1,speed:L=40,cycleDuration:R=0,loop:g=!1,startDelay:k=1500,resetOnInactive:b=!0}){const o=e.useRef(null),C=e.useRef(0),h=e.useRef(null),a=e.useRef(0),t=e.useRef(!1),f=e.useRef(!1),d=e.useRef(null),[m,i]=e.useState(0),p=e.useCallback(s=>{if(R&&R>0){const c=Math.max(0,s.scrollHeight-s.clientHeight);return c>0?c/R:0}return typeof L=="function"?Math.max(1,L(s)):Number(L)||0},[R,L]),v=e.useCallback(()=>{o.current&&cancelAnimationFrame(o.current),o.current=null,C.current=0},[]),T=e.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),w=e.useCallback(()=>{f.current=!0,d.current&&(cancelAnimationFrame(d.current),d.current=null),d.current=requestAnimationFrame(()=>{f.current=!1,d.current=null})},[]),r=e.useCallback(s=>{if(!E)return;const c=u.current;if(!c)return;const M=C.current||s,X=Math.min(.05,Math.max(0,(s-M)/1e3));C.current=s;const y=Math.max(0,c.scrollHeight-c.clientHeight);if(y<=0){o.current=requestAnimationFrame(r);return}a.current===0&&c.scrollTop>0&&(a.current=c.scrollTop);const Y=p(c)*X;if(a.current=Math.min(y,a.current+Y),w(),c.scrollTo({top:a.current,left:0,behavior:"auto"}),a.current>=y-.5)if(g)a.current=0,c.scrollTo({top:0,left:0,behavior:"auto"});else{v();return}o.current=requestAnimationFrame(r)},[E,v,g,w,u,p]),n=e.useCallback(()=>{v();const s=u.current;s&&(a.current=s.scrollTop||0,t.current=!0,o.current=requestAnimationFrame(r))},[v,u,r]),l=e.useCallback(()=>{v()},[v]),S=e.useCallback((s=0)=>{const c=u.current;c&&(a.current=s,c.scrollTo({top:s,left:0,behavior:"auto"}))},[u]);return e.useEffect(()=>(v(),T(),E&&(t.current?n():h.current=setTimeout(()=>{E&&n()},Math.max(0,k))),()=>{v(),T()}),[E,k,n,v,T,m]),e.useEffect(()=>{b&&(E||(t.current=!1,v(),T(),f.current=!1,a.current=0,u.current?.scrollTo({top:0,left:0,behavior:"auto"})))},[E,v,T,u,b]),e.useEffect(()=>{const s=u.current;if(!s||typeof ResizeObserver>"u")return;let c=Math.max(0,s.scrollHeight-s.clientHeight);const M=new ResizeObserver(()=>{const X=Math.max(0,s.scrollHeight-s.clientHeight);X>c+1&&(c=X,i(y=>y+1))});return M.observe(s),()=>M.disconnect()},[u]),e.useEffect(()=>()=>{v(),T(),d.current&&(cancelAnimationFrame(d.current),d.current=null),f.current=!1},[v,T]),{startNow:n,stopNow:l,resetPosition:S,isAnimating:()=>!!o.current,hasStartedThisCycle:()=>t.current,getCurrentPosition:()=>a.current,internalScrollRef:f,getMetrics:()=>{const s=u.current,c=s?Math.max(0,s.scrollHeight-s.clientHeight):0,M=s?s.scrollTop:0,X=c>0?M/c:0;return{top:M,max:c,progress:X,animating:!!o.current,started:t.current,internalGuard:f.current}}}}function B({ref:u,active:E=!1,speed:L=40,cycleDuration:R=0,loop:g=!1,startDelay:k=1500,resumeDelay:b=900,resumeOnUserInput:o=!0,threshold:C=.3,visibleRootMargin:h="0px",resetOnInactive:a=!0}){const t=e.useRef(null),f=e.useRef(!1),[d,m]=e.useState(!1),[i,p]=e.useState(!1),[v,T]=e.useState(!1),w=D(u,{threshold:C,rootMargin:h}),r=V({ref:u,active:E&&w&&!d,speed:L,cycleDuration:R,loop:g,startDelay:k,resetOnInactive:a}),n=e.useCallback(()=>{t.current&&(clearTimeout(t.current),t.current=null),p(!1)},[]),l=e.useCallback(()=>{m(!0),n()},[n]),S=e.useCallback(()=>{o&&(f.current||(n(),p(!0),t.current=setTimeout(()=>{f.current||(p(!1),m(!1))},Math.max(0,b))))},[o,b,n]),s=e.useCallback(y=>{const P=u.current;P&&P.dispatchEvent(new CustomEvent("autoscroll-user",{bubbles:!0,detail:{phase:y}}))},[u]),c=e.useCallback(()=>{f.current=!0,T(!0),l(),s("start")},[l,s]),M=e.useCallback(()=>{f.current=!1,T(!1),s("end"),S()},[s,S]),X=e.useCallback(()=>{f.current=!0,T(!0)},[]);return I({elementRef:u,tapThreshold:8,longPressDelay:600,onTouchStart:c,onTouchMove:(y,P)=>{P.moved&&c()},onTouchEnd:M,onLongPress:c,preventDefaultOnTouch:!1}),q({elementRef:u,scrollThreshold:1,debounceDelay:80,trustedOnly:!0,internalFlagRef:r.internalScrollRef,wheelSensitivity:1,onScrollStart:c,onScrollActivity:X,onWheelActivity:c,onScrollEnd:M}),U({elementRef:u,onPointerDown:c,onPointerMove:(y,P)=>{P.moved&&c()},onPointerUp:M}),e.useEffect(()=>{const y=u.current;if(!y)return;const P=160,Y=160;let x=null,A=null;const H=()=>{r.internalScrollRef.current||(c(),x&&clearTimeout(x),x=setTimeout(M,P))},N=()=>{c(),A&&clearTimeout(A),A=setTimeout(M,Y)};return y.addEventListener("scroll",H,{passive:!0}),y.addEventListener("wheel",N,{passive:!0}),()=>{y.removeEventListener("scroll",H),y.removeEventListener("wheel",N),x&&clearTimeout(x),A&&clearTimeout(A)}},[r.internalScrollRef,M,c,u]),e.useEffect(()=>{a&&(!E||!w)&&(f.current=!1,T(!1),m(!1),n())},[E,w,a,n]),e.useEffect(()=>()=>{n(),f.current=!1,T(!1)},[n]),{inView:w,paused:d,resumeScheduled:i,engaged:v,pauseNow:l,resumeNow:()=>{n(),m(!1)},startNow:r.startNow,stopNow:r.stopNow,resetPosition:r.resetPosition,isAnimating:r.isAnimating,hasStartedThisCycle:r.hasStartedThisCycle,getCurrentPosition:r.getCurrentPosition,getMetrics:r.getMetrics}}function _({totalItems:u,currentIndex:E,setIndex:L,autoplayTime:R=3e3,loop:g=!0,enabled:k=!0}){const b=e.useRef(null),o=e.useCallback(()=>{b.current&&(clearTimeout(b.current),b.current=null)},[]),C=e.useCallback(()=>{if(u<=1)return;const t=E+1,f=t>=u?g?0:Math.max(u-1,0):t;L(f)},[E,g,L,u]),h=e.useCallback(()=>{try{return typeof R=="function"?R():R}catch{return 3e3}},[R]),a=e.useCallback(()=>{if(o(),!k||u<=1)return;const t=Math.max(0,Number(h())||0);b.current=setTimeout(C,t)},[C,o,k,h,u]);return e.useEffect(()=>(a(),o),[a,o]),{schedule:a,clearTimer:o,advance:C}}const W=({initialPausedState:u=!1,resumeTriggers:E=["scroll","click-outside","hover-away"],resumeDelay:L=5e3}={})=>{const[R,g]=e.useState(u),[k,b]=e.useState(!1),[o,C]=e.useState(!1),[h,a]=e.useState(!1),t=e.useRef(null),f=e.useCallback(()=>{t.current&&(clearTimeout(t.current),t.current=null),a(!1)},[]),d=e.useCallback(()=>{f(),a(!0),t.current=setTimeout(()=>{a(!1),b(!1),C(!1),g(!1)},L)},[f,L]),m=e.useCallback(()=>g(!0),[]),i=e.useCallback(()=>{f(),g(!1),b(!1),C(!1)},[f]),p=e.useCallback(()=>g(n=>!n),[]),v=e.useCallback(()=>{f(),b(!0),C(!0)},[f]),T=e.useCallback(()=>{b(!1),C(!1)},[]),w=e.useCallback(()=>o&&k?(g(!0),!0):!1,[o,k]),r=e.useCallback(n=>{E.includes(n)&&(b(!1),C(!1),R&&d())},[R,E,d]);return e.useEffect(()=>()=>f(),[f]),{isPaused:R,userEngaged:k,shouldPauseAfterVideo:o,isResumeScheduled:h,scheduleResume:d,cancelScheduledResume:f,pause:m,resume:i,toggle:p,engageUser:v,disengageUser:T,pauseAfterVideoIfEngaged:w,handleResumeActivity:r}},z=({containerSelector:u="[data-container]",itemSelector:E="[data-item]",onOutsideClick:L=()=>{},onInsideClick:R=()=>{},onItemClick:g=()=>{},trustedOnly:k=!0}={})=>(e.useEffect(()=>{const b=o=>{if(k&&!o.isTrusted)return;const C=o.target,h=C?.closest?.(u)??null,a=C?.closest?.(E)??null;if(!h){L(o);return}R(o,h),g(o,a,h)};return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[u,E,R,L,g,k]),{triggerClick:b=>{document.querySelector(b)?.click?.()}});function J({totalItems:u,currentIndex:E,setIndex:L,autoplayTime:R=3e3,resumeDelay:g=5e3,resumeTriggers:k=["scroll","click-outside","hover-away"],containerSelector:b="[data-autoplay-container]",itemSelector:o="[data-autoplay-item]",inView:C=!0,pauseOnEngage:h=!1,engageOnlyOnActiveItem:a=!1,activeItemAttr:t="data-active"}){const f=e.useRef(!1),{isPaused:d,userEngaged:m,isResumeScheduled:i,engageUser:p,handleResumeActivity:v,pause:T,resume:w}=W({initialPausedState:!1,resumeTriggers:k,resumeDelay:g}),{advance:r,schedule:n}=_({totalItems:u,currentIndex:E,setIndex:L,autoplayTime:R,enabled:!d&&C}),l=e.useCallback(()=>{f.current=!0,m&&!d&&T()},[T,m,d]);return e.useEffect(()=>{f.current=!1},[E]),e.useEffect(()=>{f.current&&m&&!d&&T()},[m,d,T]),q({scrollThreshold:10,debounceDelay:120,onScrollActivity:()=>v("scroll")}),z({containerSelector:b,itemSelector:o,onOutsideClick:()=>v("click-outside"),onInsideClick:()=>{},onItemClick:(S,s)=>{a&&!(s?.getAttribute(t)==="true")||(p(),h&&T())}}),e.useEffect(()=>{const S=Array.from(document.querySelectorAll(o));if(!S.length)return;const s=y=>!!y&&(!a||y.getAttribute(t)==="true"),c=y=>{const P=y.currentTarget;s(P)&&(p(),h&&T())},M=y=>{const P=y.relatedTarget?.closest?.(o)??null;s(P)||v("hover-away")};S.forEach(y=>{y.addEventListener("mouseenter",c),y.addEventListener("mouseleave",M)});const X=y=>{if(!m)return;const Y=document.elementFromPoint(y.clientX,y.clientY)?.closest?.(o)??null;s(Y)||v("hover-away")};return document.addEventListener("pointermove",X,{passive:!0}),()=>{S.forEach(y=>{y.removeEventListener("mouseenter",c),y.removeEventListener("mouseleave",M)}),document.removeEventListener("pointermove",X)}},[o,t,a,h,p,T,v,m]),e.useEffect(()=>{const S=document.querySelector(b);if(!S)return;const s=c=>{const X=c.detail?.phase,y=c.target?.closest?.(o);a&&!(y?.getAttribute(t)==="true")||(X==="start"?(p(),h&&!d&&T()):X==="end"&&v("scroll"))};return S.addEventListener("autoscroll-user",s),()=>S.removeEventListener("autoscroll-user",s)},[b,o,t,a,h,p,T,d,v]),e.useMemo(()=>({isAutoplayPaused:d,isResumeScheduled:i,userEngaged:m,pause:T,resume:w,engageUser:p,advance:r,schedule:n,beginGraceWindow:l}),[r,n,l,p,d,i,T,w,m])}const K=({enabled:u=!0,leftElRef:E,rightElRef:L,onLeft:R=()=>{},onRight:g=()=>{},dragThreshold:k=40,tapThreshold:b=12}={})=>{const o=e.useRef({active:!1,zone:null,id:null,startX:0,startY:0,moved:!1,slid:!1}),C=e.useCallback((h,a)=>{if(!h||typeof window>"u")return()=>{};const t=m=>{u&&(o.current={active:!0,zone:a,id:m.pointerId,startX:m.clientX,startY:m.clientY,moved:!1,slid:!1},h.setPointerCapture?.(m.pointerId))},f=m=>{const i=o.current;if(!i.active||i.id!==m.pointerId||i.zone!==a)return;const p=m.clientX-i.startX,v=m.clientY-i.startY;!i.moved&&(Math.abs(p)>2||Math.abs(v)>2)&&(i.moved=!0),!(Math.abs(v)>Math.abs(p))&&(m.preventDefault(),!i.slid&&Math.abs(p)>=k&&(a==="left"?R():g(),i.slid=!0))},d=m=>{const i=o.current;if(!i.active||i.id!==m.pointerId||i.zone!==a)return;const p=m.clientX-i.startX,v=m.clientY-i.startY;!i.slid&&Math.hypot(p,v)<=b&&(a==="left"?R():g());try{h.releasePointerCapture?.(m.pointerId)}catch{}o.current={active:!1,zone:null,id:null,startX:0,startY:0,moved:!1,slid:!1}};return h.addEventListener("pointerdown",t),h.addEventListener("pointermove",f),h.addEventListener("pointerup",d),h.addEventListener("pointercancel",d),()=>{h.removeEventListener("pointerdown",t),h.removeEventListener("pointermove",f),h.removeEventListener("pointerup",d),h.removeEventListener("pointercancel",d)}},[k,u,R,g,b]);e.useEffect(()=>{if(!u)return;const h=C(E?.current??null,"left"),a=C(L?.current??null,"right");return()=>{h?.(),a?.()}},[u,E,L,C])};export{B as a,K as b,J as u};
