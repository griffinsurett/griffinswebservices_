---
// src/pages/index.astro
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import {
  query,
  sortByOrder,
} from "@/utils/query";
import TextHero from "@/layouts/TextHero.astro";
import { siteData } from "@/content/siteData";
import { roots } from "@/utils/query/snippets";
import CTASection from "@/layouts/CTASection.astro";
import Video from "@/components/Video/Video.astro";
import PortfolioShowcaseSection from "@/layouts/PortfolioShowcaseSection.astro";
import GradientLayout from "@/layouts/GradientLayout.astro";
import FrontPageHero from "@/layouts/FrontPageHero.astro";
import ColorBorderLayout from "@/layouts/ColorBorderLayout.astro";
import DoubleCard from "@/layouts/DoubleCard.astro";

const heroHeading = {
  before: "Launch a website that works.",
  text: "Fast, secure, growth-ready.",
  after: "",
};

const heroDescription =
  "We're a New Jersey based Web Agency that creates fast, engaging websites built to grow your business. We handle hosting, maintenance, and security â€” and provide full SEO services to help you get found and stay ahead.";

---

<BaseLayout title="Home" description={siteData.description}>
  <main class="flex-1">

    <!-- <GradientLayout> -->
      <!-- Lightweight text-only hero - zero carousel JS on initial load -->
      <!-- <TextHero
        heading={heroHeading}
        description={heroDescription}
        primaryCTA={{
          text: "Get Started",
          link: "/contact-us",
        }}
        scrollToSection="#portfolio-showcase"
      /> -->

      <FrontPageHero
      heading={heroHeading}
        description={heroDescription}
        primaryCTA={{
          text: "Get Started",
          link: "/contact-us",
        }}
        scrollToSection="#website-services"
        />

        <div class="block md:hidden min-h-screen inner-section">
         <ContentRenderer
            query={query("projects")}
            variant="PortfolioScreenVariant"
            responsivity={{ hide: "md" }}
            clientLoadPlaceholder={true}
          />
          </div>

          <DoubleCard />
    <!-- Under-hero portfolio showcase -->
    <!-- <PortfolioShowcaseSection /> -->

    <!-- </GradientLayout> -->

    <ContentRenderer
      query={roots("capabilities").orderBy(sortByOrder()).limit(6)}
      variant="CardVariant"
      id="website-services"
      title="Website Services"
      heading={{
        before: "Websites aren't just something we do.",
        text: "They're our specialty.",
      }}
      description="You deserve a lightning-fast, secure, and scalable website that turn your visitors into customers. Every site we build is built to dominate and stand the test of time."
      columns={3}
      gap="lg"
      showButtonSection={false}
      className="pt-35 lg:pt-20"
    />

    <!-- Website Benefits -->
    <ContentRenderer
      query={query("benefits").orderBy(sortByOrder())}
      variant="IconListVariant"
      title="Why Choose Us"
      heading={{
        before: "What Makes",
        text: "Our Websites Different",
      }}
    >
    <Video
      slot="under-text"
      src="/speed-site.mov"
      alt="Speed site walkthrough"
      controls
      clientLoadPlaceholder={true}
      wrapperClass="video-shell"
    />
    <!-- <p class="large-text text-white/80">
      Watch how on our sites a user may even be done booking before the average site loads.
    </p> -->
  </ContentRenderer>

    <!-- About Us Two-Column Section -->
    <!-- <ContentRenderer
      query={query("about-us").orderBy(sortByOrder())}
      variant="TwoColumnImageVariant"
      imagePosition="right"
      imagePlaceholder="ðŸ‘¨â€ðŸ’»"
      imageAlt="Griffin Surett - Founder"
      contentType="text"
      borderClass=""
      ctaText="Learn More About Us"
    >
    <Video
      src="/speed-site.mov"
      alt="Speed site walkthrough"
      controls
      clientLoadPlaceholder={true}
      wrapperClass="video-shell"
    />
    </ContentRenderer> -->

    <!-- <ContentRenderer query={query("projects")} variant="PortfolioVariant" /> -->
    <ContentRenderer
      query={query("solutions")}
      variant="IconListVariant"
      heading={{
        before: "Premium Websites for",
        text: "Any Business,",
        after: "Built for Your Growth",
      }}
      title="Website Services"
      description="We design top-tier websites for businesses in every industry â€” from local services to global brands. Every site is custom-built for your goals, lightning-fast, secure, and easy to manage. No templates, no bloat â€” just a powerful online presence that looks sharp, performs flawlessly, and grows with you."
      autoAdvanceDelay={2000}
/>
     <ColorBorderLayout borderPosition="both">
    <ContentRenderer
      query={query("solutions")}
      variant="VideoAccordionVariant"
      title="See Our Solutions In Action"
      heading={{
        before: "Explore the work.",
        text: "Watch how each solution performs.",
      }}
      description="Dive deeper into the speed, visuals, and UX of every solution with quick video overviews pulled straight from our library."
      className="pt-16"
      autoAdvanceDelay={3500}
    />
    </ColorBorderLayout>


    <!-- Testimonials with rating filter -->
    <ContentRenderer
      query={query("testimonials").where((entry) => entry.data.rating >= 4)}
      variant="TestimonialCarouselVariant"
    />

       <!-- Portfolio with sorting -->
    <ContentRenderer
      query={query("projects")
        .orderBy(sortByOrder("publishDate", "desc"))}
      variant="PortfolioVariant"
    />

    <!-- Technologies -->
    <ContentRenderer
      query={query("technologies").orderBy(sortByOrder())}
      variant="TechnologiesVariant"
    />

    <!-- Filtered query - still gets meta from authors -->
    <!-- <ContentRenderer
      query={query("authors").where(whereArrayContains("tags", "featured"))}
      variant="CardVariant"
      columns={3}
      gap="lg"
    /> -->

    <!-- Addon Capabilities - auto-populates from capabilities meta -->
    <!-- <ContentRenderer
      query={query("capabilities").orderBy(sortByOrder())}
      variant="CardVariant"
      columns={3}
      gap="lg"
    /> -->

    <!-- FAQ ContentRenderer -->
    <ContentRenderer
      query={query("faq").orderBy(sortByOrder())}
      variant="AccordionVariant"
      allowMultiple={false}
      title="FAQs"
    />

    <!-- <CTASection
      title="Get Started"
      heading={{
        before: "Ready to Transform Your Online Presence into a ",
        text: "High-Performance Growth Engine?",
      }}
      description="Join hundreds of successful businesses who trust Griffin's Web Services. While others juggle dozens of services, we've mastered one: building lightning-fast, secure, and scalable sites that turn visitors into customers."
    /> -->

    <!-- Contact ContentRenderer -->
    <!-- <ContentRenderer
      query={query("contact-us")}
      variant="ContactVariant"
      columns={2}
    /> -->

    <!-- Blog with limit - auto-populates from blog meta -->
    <!-- <ContentRenderer
      query={query("blog").limit(2)}
      variant="BlogVariant"
      columns={2}
    /> -->

    <!-- Multi-collection query - requires manual title/description -->
    <!-- <ContentRenderer
      query={query(["blog", "projects"]).orderBy(sortByDate()).limit(10)}
      variant="ListVariant"
      title="Recent Updates"
      description="Latest from our blog and portfolio"
    /> -->
  </main>
</BaseLayout>
