import{r as e,j as U}from"./react-core.QUkC7_l_.js";import{u as K}from"./useVisibility.B-3m_lqm.js";const Q=({onHoverStart:l=()=>{},onHoverEnd:s=()=>{},hoverDelay:m=0,unhoverIntent:g}={})=>{const h=e.useRef(null),c=!!g?.enabled,f=e.useRef(null),w=e.useRef(null),d=e.useRef({active:!1,elem:null,index:null,leftAt:0,rect:null,minDist:0,reentryGraceMs:0,lastPos:{x:NaN,y:NaN},lastDistance:1/0}),i=e.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),b=e.useCallback(()=>{w.current&&(w.current(),w.current=null),f.current&&(clearTimeout(f.current),f.current=null)},[]),y=e.useCallback(t=>{if(!c)return;const n=d.current;n.active&&(b(),n.active=!1,g?.onUnhoverCancel?.(n.elem,n.index,{reason:t}))},[c,b,g]),$=e.useCallback(()=>{if(!c)return;const t=d.current;if(!t.active)return;const n={timeAway:Date.now()-t.leftAt,distance:t.lastDistance};b(),t.active=!1,g?.onUnhoverCommit?.(t.elem,t.index,n)},[c,b,g]),j=(t,n)=>({left:t.left-n,top:t.top-n,right:t.right+n,bottom:t.bottom+n}),L=(t,n,u)=>{const x=t<u.left?u.left-t:t>u.right?t-u.right:0,T=n<u.top?u.top-n:n>u.bottom?n-u.bottom:0;return Math.hypot(x,T)},C=e.useCallback((t,n)=>{if(!c||typeof window>"u")return;y("restart");const{leaveDelay:u=120,reentryGraceMs:x=250,minOutDistance:T=8,boundaryPadding:z=6}=g??{},D=Number(u),o=Number(x),a=Number(T),p=Number(z),N=t?.getBoundingClientRect?.(),S=N?j(N,p):null,r=d.current;r.active=!0,r.elem=t??null,r.index=n??null,r.leftAt=Date.now(),r.rect=S,r.minDist=a,r.reentryGraceMs=o,r.lastDistance=1/0;const F=A=>{if(!r.active)return;const P=A.clientX,V=A.clientY;if(r.lastPos={x:P,y:V},r.rect){const B=L(P,V,r.rect);r.lastDistance=B,B===0&&Date.now()-r.leftAt<=r.reentryGraceMs&&y("reenter-geom")}};window.addEventListener("pointermove",F,{passive:!0}),w.current=()=>window.removeEventListener("pointermove",F);const v=()=>{if(!r.active)return;const A=Date.now()-r.leftAt,P=r.lastDistance;A>=D&&P>=r.minDist?$():f.current=setTimeout(v,Math.max(30,D/3))};f.current=setTimeout(v,D)},[y,$,c,g]),k=e.useCallback((t,n=null)=>{i(),y("enter"),m>0?h.current=setTimeout(()=>l(t,n),m):l(t,n)},[y,i,m,l]),M=e.useCallback((t,n=null)=>{i(),m>0?h.current=setTimeout(()=>s(t,n),m):s(t,n),C(t,n)},[i,m,s,C]);return e.useEffect(()=>()=>{i(),b(),d.current.active=!1},[i,b]),{handleMouseEnter:k,handleMouseLeave:M,cancelUnhoverIntent:()=>y("manual")}},H=l=>typeof l=="number"?`${l}px`:l??"0px",Z=({ref:l,triggers:s="hover",active:m=!1,hoverDelay:g=0,unhoverIntent:h,visibleRootMargin:c=120,visibilityOptions:f={threshold:.25}})=>{const w=e.useMemo(()=>Array.isArray(s)?s:[s??"hover"],[s]),d=e.useMemo(()=>w.map(a=>String(a||"").toLowerCase()),[w]),i=d.includes("hover"),b=d.includes("visible"),y=d.includes("always"),$=d.includes("controlled"),[j,L]=e.useState(!1),{handleMouseEnter:C,handleMouseLeave:k}=Q({hoverDelay:g,unhoverIntent:h,onHoverStart:()=>L(!0),onHoverEnd:()=>L(!1)}),M=e.useMemo(()=>{if(typeof c=="number"){const a=Math.max(0,c|0);return`-${a}px 0px -${a}px 0px`}if(c&&typeof c=="object"){const a=H(c.top),p=H(c.right),N=H(c.bottom),S=H(c.left);return`${a} ${p} ${N} ${S}`}return c||"0px"},[c]),t=e.useMemo(()=>({...f,threshold:f?.threshold??.25,rootMargin:M??(f?f.rootMargin:void 0)}),[M,f]),n=K(l,t),u=!!(y||i&&j||$&&m||b&&n),x=e.useRef(u),T=u&&!x.current,z=!u&&x.current;e.useEffect(()=>{x.current=u},[u]);const D=e.useCallback(a=>{if(!i)return;const p=a?.currentTarget??null;C(p)},[C,i]),o=e.useCallback(a=>{if(!i)return;const p=a?.currentTarget??null;k(p)},[k,i]);return{engaged:u,inView:n,hovered:j,wantsHover:i,wantsVisible:b,isAlways:y,isControlledTrigger:$,justEngaged:T,justDisengaged:z,onEnter:D,onLeave:o}},_=l=>{const s=typeof l=="number"?l:typeof l=="string"?parseFloat(l):NaN;return Number.isFinite(s)?Math.max(0,Math.min(100,s)):0};function te({children:l,variant:s="none",triggers:m="hover",active:g=!1,controller:h,duration:c=2e3,fadeOutMs:f=220,color:w="var(--color-accent)",borderRadius:d="rounded-3xl",borderWidth:i=2,className:b="",innerClassName:y="",hoverDelay:$=0,unhoverIntent:j,visibleRootMargin:L=75,onMouseEnter:C,onMouseLeave:k,linkProps:M,...t}){const n=e.useRef(null),{engaged:u,onEnter:x,onLeave:T,isAlways:z}=Z({ref:n,triggers:m,active:g,hoverDelay:$,unhoverIntent:j,visibleRootMargin:L}),D=e.useMemo(()=>(Array.isArray(m)?m:[m]).map(I=>String(I||"").toLowerCase()).includes("always"),[m]),o=u||z||D,a=e.useMemo(()=>h==null?null:_(h),[h]),p=Number.isFinite(a??NaN),N=e.useRef(p&&a||0),[S,r]=e.useState(!1),[F,v]=e.useState(null),A=e.useRef(o),[P,V]=e.useState(!1);e.useEffect(()=>{V(!0)},[]),e.useEffect(()=>{if(s!=="progress"){A.current=o;return}const E=A.current;if(A.current=o,o&&!E){r(!1),v(null);return}if(!o&&E){v(N.current),r(!0);const I=window.setTimeout(()=>{r(!1),v(null),N.current=0},f);return()=>window.clearTimeout(I)}},[s,o,f]),e.useEffect(()=>{if(s==="progress"){if(p){o&&(N.current=a??0);return}o&&(N.current=100)}},[s,o,p,a]);const B=e.useMemo(()=>s==="progress"?p?a??0:o&&P?100:0:s==="progress-b-f"&&o?100:0,[s,p,a,o,P]),X=s==="progress"&&!o&&F!=null?F:B,O=typeof i=="number"?`${i}px`:i,R={"--ab-color":w,"--ab-border-width":O,"--ab-duration":`${c}ms`,"--ab-fade-duration":`${f}ms`};(s==="progress"||s==="progress-b-f")&&(R["--ab-progress"]=`${(X||0)*3.6}deg`),s==="progress"?R.opacity=o||S?1:0:s==="solid"?(R.opacity=o?1:0,R.padding=o?O:"0px"):s==="progress-infinite"&&(R.opacity=o?1:0,R.animationPlayState=o?"running":"paused");const G=["absolute","inset-0",d,"pointer-events-none","z-20","animated-border-overlay"];s==="solid"?G.push("is-solid","transition-all","duration-800","ease-in-out"):s==="progress"?G.push("progress"):s==="progress-b-f"?G.push("progress-b-f"):s==="progress-infinite"&&G.push("progress-infinite");const Y=s!=="none",q=E=>{C?.(E),x(E)},J=E=>{k?.(E),T(E)};return U.jsxs("div",{ref:n,className:`relative ${b}`.trim(),onMouseEnter:q,onMouseLeave:J,...t,children:[Y&&U.jsx("div",{className:G.join(" "),style:R}),M?.href?U.jsx("a",{...M,className:`relative z-10 overflow-hidden ${d} ${y} ${M.className??""}`.trim(),children:l}):U.jsx("div",{className:`relative z-10 overflow-hidden ${d} ${y}`,children:l})]})}export{te as A};
