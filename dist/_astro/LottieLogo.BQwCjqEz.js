const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/lottie_light.nME53QGF.js","_astro/react-core.BzPYpmcP.js"])))=>i.map(i=>d[i]);
import{r as t,j as y}from"./react-core.BzPYpmcP.js";import{_ as Z}from"./ToggleControl.CCo21FU3.js";import{u as Y,a as ee}from"./visibility-hooks.hQtjzsXG.js";import"./accordion.C6yfI0Q0.js";import"./ui-primitives.r4PY3rvS.js";import"./engagement-hooks.By-Bf1QQ.js";const Q=["data-a11y-motion","data-a11y-animations"];function P(){if(typeof window>"u"||typeof document>"u")return!1;const r=document.documentElement,a=window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches??!1,c=r.getAttribute("data-a11y-motion")==="reduced",d=r.getAttribute("data-a11y-animations")==="true";return a||c||d}function W(r=!0){const[a,c]=t.useState(()=>r?P():!1);return t.useEffect(()=>{if(!r||typeof window>"u"||typeof document>"u")return;const d=()=>{c(P())};d();const p=window.matchMedia?window.matchMedia("(prefers-reduced-motion: reduce)"):null;p?.addEventListener("change",d);const f=new MutationObserver(E=>{for(const m of E)if(m.type==="attributes"&&m.attributeName&&Q.includes(m.attributeName)){d();break}});return f.observe(document.documentElement,{attributes:!0,attributeFilter:Q}),()=>{p?.removeEventListener("change",d),f.disconnect()}},[r]),t.useEffect(()=>{c(r?P():!1)},[r]),r?a:!1}const te=r=>{typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(r,{timeout:1e3}):setTimeout(r,0)},g=r=>r?typeof r.currentFrame=="number"?r.currentFrame:typeof r.currentRawFrame=="number"?r.currentRawFrame:0:0,U=2;function re({animationData:r=null,animationUrl:a=null,alt:c="",className:d="",containerClasses:p="relative",trigger:f="load",respectReducedMotion:E=!0,rewindToStartOnTop:m=!1,completeRotationOnTop:v=!1,loop:D=!0,autoplay:L=!1,speed:I=1,renderer:j="svg",fadeMs:G=180,scrollThreshold:oe=1,debounceDelay:se=8,wheelSensitivity:ie=1,children:J}){const k=t.useRef(null),_=t.useRef(null),s=t.useRef(null),b=t.useRef(null),N=t.useRef(0),S=t.useRef(null),T=t.useRef(!1),x=t.useRef(!0),[M,O]=t.useState(!0),[R,A]=t.useState(!1),[H,K]=t.useState(!1),l=t.useCallback(()=>{const e=s.current;e&&S.current&&e.removeEventListener("enterFrame",S.current),S.current=null,T.current=!1},[]);t.useEffect(()=>{const e=()=>{const n=document.documentElement;K((n?.scrollHeight||0)>(window.innerHeight||0)+1)};"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:500}):setTimeout(e,100)},[]);const w=t.useMemo(()=>f==="scroll"||f==="visible"||f==="load"?f:H?"scroll":"load",[f,H]),i=W(E),$=Y(k,{threshold:.1,rootMargin:"0px",once:!0}),F=Y(k,{threshold:0,rootMargin:"0px",once:!1});t.useEffect(()=>{if(!i)switch(w){case"load":A(!0);break;case"visible":F&&A(!0);break}},[w,F,i]);const q=t.useCallback(e=>{const n=s.current,u=Date.now();N.current=u,n&&(l(),clearTimeout(b.current),e>0?(n.setDirection(1),n.isPaused&&n.play()):e<0&&(n.setDirection(-1),n.isPaused&&n.play()),b.current=setTimeout(()=>{u===N.current&&n&&n.pause()},200))},[l]),z=t.useCallback(()=>{if(!m)return;const e=s.current;if(!e||T.current)return;if(g(e)<=0){e.goToAndStop(0,!0);return}T.current=!0,clearTimeout(b.current);const u=()=>{g(e)<=.5&&(e.pause(),e.goToAndStop(0,!0),l())};S.current=u,e.addEventListener("enterFrame",u),e.setDirection(-1),e.play()},[m,l]),B=t.useCallback(()=>{if(!v)return;const e=s.current;if(!e||T.current)return;const n=e.totalFrames||1;if(g(e)<=.5){e.goToAndStop(0,!0);return}T.current=!0,clearTimeout(b.current);const o=()=>{e.pause(),e.goToAndStop(0,!0),e.removeEventListener("complete",o),e.removeEventListener("loopComplete",o),l()},h=()=>{g(e)>=n-1&&(e.pause(),e.goToAndStop(0,!0),l())};S.current=h,e.addEventListener("enterFrame",h),e.addEventListener("complete",o),e.addEventListener("loopComplete",o),e.setDirection(1),e.play()},[v,l]);ee({elementRef:null,scrollThreshold:1,debounceDelay:16,trustedOnly:!0,wheelSensitivity:1,onScrollActivity:w==="scroll"&&$?({dir:e,delta:n})=>{if(!i&&(R||A(!0),s.current)){const u=e==="down"?n:-n;q(u)}}:void 0,onWheelActivity:w==="scroll"&&$?({deltaY:e})=>{i||(R||A(!0),s.current&&q(e))}:void 0}),t.useEffect(()=>{if(!(m||v)||w!=="scroll"||i||typeof window>"u")return;x.current=(window.scrollY||0)<=U;const n=()=>{const o=(window.scrollY||0)<=U;!x.current&&o&&(v?B():z()),x.current=o};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[m,v,w,z,B,i]),t.useEffect(()=>{if(i||!R||!_.current||s.current)return;if(!r&&!a){console.warn("OptimizedLottie: No animationData or animationUrl provided");return}let e=!1;return te(async()=>{if(!e)try{const{default:n}=await Z(async()=>{const{default:V}=await import("./lottie_light.nME53QGF.js").then(X=>X.l);return{default:V}},__vite__mapDeps([0,1]));let u=r;if(!u&&a&&(u=await(await fetch(a)).json()),e||!u)return;const o=n.loadAnimation({container:_.current,renderer:j,loop:D,autoplay:L,animationData:u});s.current=o,o.setSpeed(I),L||o.goToAndStop(0,!0);const h=()=>{L||o.goToAndStop(0,!0),requestAnimationFrame(()=>O(!1)),w==="load"&&L&&(o.setDirection(1),o.play())};o.addEventListener("DOMLoaded",h),o.addEventListener("data_ready",h),Promise.resolve().then(()=>h())}catch(n){console.error("OptimizedLottie: Failed to load animation:",n)}}),()=>{e=!0,l(),s.current?.destroy?.(),s.current=null}},[R,w,r,a,j,D,L,I,l,i]),t.useEffect(()=>{i&&(O(!0),A(!1),l(),clearTimeout(b.current),s.current?.destroy?.(),s.current=null)},[i,l]),t.useEffect(()=>{w!=="visible"||!s.current||i||!M&&F&&(s.current.setDirection(1),s.current.play())},[w,F,M,i]),t.useEffect(()=>()=>clearTimeout(b.current),[]);const C=i||M;return y.jsxs("div",{ref:k,"aria-label":c,className:`${d} ${p}`,children:[y.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{transition:`opacity ${G}ms ease`,opacity:C?1:0},"aria-hidden":!C,children:y.jsx("div",{className:"w-full h-full",children:J})}),R&&!i&&y.jsx("div",{ref:_,className:"absolute inset-0",style:{visibility:i?"hidden":"visible"},"aria-hidden":C})]})}const ne="/lotties/Animation_logo_small_size.json";function me({alt:r="",className:a="logo-class",mediaClasses:c="block w-[40px] h-[40px] lg:w-[45px] lg:h-[45px] object-contain",trigger:d="auto",respectReducedMotion:p=!0,fadeMs:f=180,loop:E=!0,completeRotationOnTop:m=!1,children:v}){return W(p)?y.jsx("div",{className:`${a} relative ${c}`,"aria-label":r,children:v}):y.jsx(re,{animationUrl:ne,alt:r,className:a,containerClasses:`relative ${c}`,trigger:d,respectReducedMotion:p,fadeMs:f,rewindToStartOnTop:!0,completeRotationOnTop:m,loop:E,autoplay:!1,speed:.5,renderer:"svg",scrollThreshold:1,debounceDelay:8,wheelSensitivity:1,children:v})}export{me as default};
