import{r as e,j as U}from"./react-core.INjS0cla.js";import{u as K}from"./visibility-hooks.CrGIozah.js";const Q=({onHoverStart:a=()=>{},onHoverEnd:n=()=>{},hoverDelay:m=0,unhoverIntent:g}={})=>{const h=e.useRef(null),c=!!g?.enabled,f=e.useRef(null),w=e.useRef(null),p=e.useRef({active:!1,elem:null,index:null,leftAt:0,rect:null,minDist:0,reentryGraceMs:0,lastPos:{x:NaN,y:NaN},lastDistance:1/0}),i=e.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),b=e.useCallback(()=>{w.current&&(w.current(),w.current=null),f.current&&(clearTimeout(f.current),f.current=null)},[]),y=e.useCallback(t=>{if(!c)return;const s=p.current;s.active&&(b(),s.active=!1,g?.onUnhoverCancel?.(s.elem,s.index,{reason:t}))},[c,b,g]),$=e.useCallback(()=>{if(!c)return;const t=p.current;if(!t.active)return;const s={timeAway:Date.now()-t.leftAt,distance:t.lastDistance};b(),t.active=!1,g?.onUnhoverCommit?.(t.elem,t.index,s)},[c,b,g]),j=(t,s)=>({left:t.left-s,top:t.top-s,right:t.right+s,bottom:t.bottom+s}),v=(t,s,u)=>{const x=t<u.left?u.left-t:t>u.right?t-u.right:0,D=s<u.top?u.top-s:s>u.bottom?s-u.bottom:0;return Math.hypot(x,D)},C=e.useCallback((t,s)=>{if(!c||typeof window>"u")return;y("restart");const{leaveDelay:u=120,reentryGraceMs:x=250,minOutDistance:D=8,boundaryPadding:z=6}=g??{},T=Number(u),o=Number(x),l=Number(D),d=Number(z),N=t?.getBoundingClientRect?.(),S=N?j(N,d):null,r=p.current;r.active=!0,r.elem=t??null,r.index=s??null,r.leftAt=Date.now(),r.rect=S,r.minDist=l,r.reentryGraceMs=o,r.lastDistance=1/0;const F=A=>{if(!r.active)return;const P=A.clientX,V=A.clientY;if(r.lastPos={x:P,y:V},r.rect){const B=v(P,V,r.rect);r.lastDistance=B,B===0&&Date.now()-r.leftAt<=r.reentryGraceMs&&y("reenter-geom")}};window.addEventListener("pointermove",F,{passive:!0}),w.current=()=>window.removeEventListener("pointermove",F);const k=()=>{if(!r.active)return;const A=Date.now()-r.leftAt,P=r.lastDistance;A>=T&&P>=r.minDist?$():f.current=setTimeout(k,Math.max(30,T/3))};f.current=setTimeout(k,T)},[y,$,c,g]),L=e.useCallback((t,s=null)=>{i(),y("enter"),m>0?h.current=setTimeout(()=>a(t,s),m):a(t,s)},[y,i,m,a]),M=e.useCallback((t,s=null)=>{i(),m>0?h.current=setTimeout(()=>n(t,s),m):n(t,s),C(t,s)},[i,m,n,C]);return e.useEffect(()=>()=>{i(),b(),p.current.active=!1},[i,b]),{handleMouseEnter:L,handleMouseLeave:M,cancelUnhoverIntent:()=>y("manual")}},H=a=>typeof a=="number"?`${a}px`:a??"0px",Z=({ref:a,triggers:n="hover",active:m=!1,hoverDelay:g=0,unhoverIntent:h,visibleRootMargin:c=120,visibilityOptions:f={threshold:.25}})=>{const w=e.useMemo(()=>Array.isArray(n)?n:[n??"hover"],[n]),p=e.useMemo(()=>w.map(l=>String(l||"").toLowerCase()),[w]),i=p.includes("hover"),b=p.includes("visible"),y=p.includes("always"),$=p.includes("controlled"),[j,v]=e.useState(!1),{handleMouseEnter:C,handleMouseLeave:L}=Q({hoverDelay:g,unhoverIntent:h,onHoverStart:()=>v(!0),onHoverEnd:()=>v(!1)}),M=e.useMemo(()=>{if(typeof c=="number"){const l=Math.max(0,c|0);return`-${l}px 0px -${l}px 0px`}if(c&&typeof c=="object"){const l=H(c.top),d=H(c.right),N=H(c.bottom),S=H(c.left);return`${l} ${d} ${N} ${S}`}return c||"0px"},[c]),t=e.useMemo(()=>({...f,threshold:f?.threshold??.25,rootMargin:M??(f?f.rootMargin:void 0)}),[M,f]),s=K(a,t),u=!!(y||i&&j||$&&m||b&&s),x=e.useRef(u),D=u&&!x.current,z=!u&&x.current;e.useEffect(()=>{x.current=u},[u]);const T=e.useCallback(l=>{if(!i)return;const d=l?.currentTarget??null;C(d)},[C,i]),o=e.useCallback(l=>{if(!i)return;const d=l?.currentTarget??null;L(d)},[L,i]);return{engaged:u,inView:s,hovered:j,wantsHover:i,wantsVisible:b,isAlways:y,isControlledTrigger:$,justEngaged:D,justDisengaged:z,onEnter:T,onLeave:o}},_=a=>{const n=typeof a=="number"?a:typeof a=="string"?parseFloat(a):NaN;return Number.isFinite(n)?Math.max(0,Math.min(100,n)):0};function ne({children:a,variant:n="none",triggers:m="hover",active:g=!1,controller:h,duration:c=2e3,fadeOutMs:f=220,color:w="var(--color-accent)",borderRadius:p="rounded-3xl",borderWidth:i=2,className:b="",innerClassName:y="",hoverDelay:$=0,unhoverIntent:j,visibleRootMargin:v=75,onMouseEnter:C,onMouseLeave:L,linkProps:M,...t}){const s=e.useRef(null),{engaged:u,onEnter:x,onLeave:D,isAlways:z}=Z({ref:s,triggers:m,active:g,hoverDelay:$,unhoverIntent:j,visibleRootMargin:v}),T=e.useMemo(()=>(Array.isArray(m)?m:[m]).map(I=>String(I||"").toLowerCase()).includes("always"),[m]),o=u||z||T,l=e.useMemo(()=>h==null?null:_(h),[h]),d=Number.isFinite(l??NaN),N=e.useRef(d&&l||0),[S,r]=e.useState(!1),[F,k]=e.useState(null),A=e.useRef(o),[P,V]=e.useState(!1);e.useEffect(()=>{V(!0)},[]),e.useEffect(()=>{if(n!=="progress"){A.current=o;return}const E=A.current;if(A.current=o,o&&!E){r(!1),k(null);return}if(!o&&E){k(N.current),r(!0);const I=window.setTimeout(()=>{r(!1),k(null),N.current=0},f);return()=>window.clearTimeout(I)}},[n,o,f]),e.useEffect(()=>{if(n==="progress"){if(d){o&&(N.current=l??0);return}o&&(N.current=100)}},[n,o,d,l]);const B=e.useMemo(()=>n==="progress"?d?l??0:o&&P?100:0:n==="progress-b-f"&&o?100:0,[n,d,l,o,P]),X=n==="progress"&&!o&&F!=null?F:B,O=typeof i=="number"?`${i}px`:i,R={"--ab-color":w,"--ab-border-width":O,"--ab-duration":`${d&&n==="progress"?0:c}ms`,"--ab-fade-duration":`${f}ms`};(n==="progress"||n==="progress-b-f")&&(R["--ab-progress"]=`${(X||0)*3.6}deg`),n==="progress"?R.opacity=o||S?1:0:n==="solid"?(R.opacity=o?1:0,R.padding=o?O:"0px"):n==="progress-infinite"&&(R.opacity=o?1:0,R.animationPlayState=o?"running":"paused");const G=["absolute","inset-0",p,"pointer-events-none","z-20","animated-border-overlay"];n==="solid"?G.push("is-solid","transition-all","duration-800","ease-in-out"):n==="progress"?G.push("progress"):n==="progress-b-f"?G.push("progress-b-f"):n==="progress-infinite"&&G.push("progress-infinite");const Y=n!=="none",q=E=>{C?.(E),x(E)},J=E=>{L?.(E),D(E)};return U.jsxs("div",{ref:s,className:`relative ${b}`.trim(),onMouseEnter:q,onMouseLeave:J,...t,children:[Y&&U.jsx("div",{className:G.join(" "),style:R}),M?.href?U.jsx("a",{...M,className:`relative z-10 overflow-hidden ${p} ${y} ${M.className??""}`.trim(),children:a}):U.jsx("div",{className:`relative z-10 overflow-hidden ${p} ${y}`,children:a})]})}export{ne as A};
