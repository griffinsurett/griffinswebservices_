---
// src/layouts/CTASection.astro
import Button from "@/components/Button/Button";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import SectionHeader from "@/components/SectionHeader.astro";
import Section from "@/components/Section.astro";
import { query } from "@/utils/query";
import { siteData } from "@/content/siteData";
import type { HeadingContent } from "@/content/schema";

interface CTA {
  text: string;
  link: string;
}

export interface Props {
  title?: string;
  heading?: HeadingContent;
  description?: string;
  primaryCTA?: CTA;
  className?: string;
  id?: string;
}

const defaultDescription =
  "Hand-crafted websites, automated systems, and ongoing support so you can sell more, grow faster, and stay secure without juggling multiple vendors.";

const {
  title,
  heading,
  description = siteData.description ?? defaultDescription,
  primaryCTA = {
    text: "Book An Intro Call",
    link: "#contact",
  },
  className = "",
  id = "hero",
} = Astro.props as Props;

---

<Section
  id={id}
  class={`min-h-screen flex items-center justify-center relative overflow-hidden ${className}`}
>

  <!-- <div class="absolute inset-0 hero-gradient-bg"></div> -->

  <div class="relative z-10 inner-section flex">
    <div
      class="h-auto lg:min-h-screen inner-section mx-auto flex flex-col justify-center items-center"
    >
      <div
        class="flex flex-col gap-2 lg:gap-4 justify-left items-start lg:justify-center lg:items-center hero-spacing lg:text-center w-full"
      >
        <SectionHeader
          className="text-left lg:text-center w-full hero-spacing"
          title={title}
          heading={heading}
          headingTag="h2"
          headingClassName="text-3xl md:text-4xl lg:text-5xl xl:text-6xl leading-tight"
        />

        <div class="flex flex-col lg:flex-row items-center gap-3 lg:gap-6">
              <ContentRenderer
              query={query("testimonials")
                .where((entry) => entry.data.featured === true)
                .limit(3)}
              variant="TestimonialCirclesVariant"
              className="px-2 md:px-0"
              counterStart={10}
              counterEnd={100}
              counterDuration={1800}
              counterSuffix="+"
              counterLabel="Happy Clients"
            />
          <Button
            href={primaryCTA.link}
            variant="primary"
            size="lg"
          >
            {primaryCTA.text}
          </Button>
        </div>
      </div>
    </div>
  </div>
</Section>
