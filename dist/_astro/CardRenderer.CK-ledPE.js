import{j as g,r as h}from"./react-core.WNgh4ro3.js";import{F as E}from"./carousels.Cr-d0Rc7.js";import P from"./FeatureCard.BSc3IeIb.js";import"./ui-primitives.EBI0wAJQ.js";import"./visibility-hooks.DaV8krGu.js";import"./accordion.DdLMpgB7.js";import"./engagement-hooks.Cj7_oI3s.js";const $={1:"grid grid-cols-1 gap-8",2:"grid grid-cols-1 md:grid-cols-2 gap-8",3:"max-3-secondary",4:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"};function z({items:n=[],columns:t=3,className:r="",showBody:s=!1,getCardClassName:e,getRingDuration:o,featureCardProps:l={},getFeatureCardProps:c,disableStagger:f=!1,animation:i}){const y=Array.isArray(n)?n:[],d=!f&&y.length>=3,m=100,A="fade-in-up",v=i?.once??!0,F=a=>i?.type?typeof i.type=="function"?i.type(a):i.type:A,I=a=>d?a%t*m:0,D=(a,u)=>{if(typeof e=="function")return e(a,u);const p=a;return[p?.class,p?.className].filter(Boolean).join(" ")},N=(a,u)=>{if(typeof o=="function")return o(a,u);const p=a;return typeof p?.ringDuration=="number"?p.ringDuration:800},S=(a,u)=>{const p=typeof c=="function"?c(a,u):{};return{...l,...p}};return y.length===0?null:g.jsx("ul",{className:`${$[t]} list-none ${r}`.trim(),children:y.map((a,u)=>{const p=I(u),R=S(a,u),{className:_,ringDuration:w,data:q,...B}=R??{},M=[D(a,u),_].filter(Boolean).join(" "),O=typeof w=="number"?w:N(a,u),k=F(u),x=a,L=x?.contentSlotId,T=x?.showBody??s;return g.jsx("li",{className:"h-full","data-animate":k,"data-animate-once":v?"true":void 0,"data-animate-delay":d?String(p):void 0,"data-animate-threshold":i?.threshold!==void 0?String(i.threshold):void 0,"data-animate-root-margin":i?.rootMargin,children:g.jsx(P,{data:a,ringDuration:O,className:M,showBody:T,contentSlotId:L,...B})},u)})})}const j="__all__";function G(n){if(n.length===0)return null;const t=n.slice(0,5);if(t.some(r=>r.parent!==void 0&&r.parent!==null))return"parent";if(t.some(r=>Array.isArray(r.tags)&&r.tags.length>0))return"tags";if(t.some(r=>r.category!==void 0&&r.category!==null))return"category";for(const r of t)for(const[s,e]of Object.entries(r))if(!["slug","url","title","description","icon","image","order","Content","content"].includes(s)&&e&&typeof e=="object"){if("id"in e||"slug"in e||"collection"in e)return s;if(Array.isArray(e)&&e.length>0&&typeof e[0]=="object"){const o=e[0];if("id"in o||"slug"in o||"collection"in o)return s}}return null}function b(n){return n==null?null:typeof n=="string"?n:typeof n=="object"?n.id||n.slug||null:String(n)}function C(n){return n.replace(/-/g," ").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function K(n,t){const r=new Map;for(const s of n){const e=s[t];if(e!=null)if(Array.isArray(e))for(const o of e){const l=b(o);if(!l)continue;const c=r.get(l);if(c)c.count++;else{const f=typeof o=="object"&&(o.title||o.label||o.name)||l,i=typeof o=="object"?o.icon:void 0;r.set(l,{label:C(f),icon:i,count:1})}}else{const o=b(e);if(!o)continue;const l=r.get(o);if(l)l.count++;else{let c=o,f;if(typeof e=="object")c=e.title||e.label||e.name||o,f=e.icon;else{const i=s[`${t}Data`];i&&(c=i.title||i.label||o,f=i.icon)}r.set(o,{label:C(c),icon:f,count:1})}}}return Array.from(r.entries()).map(([s,e])=>({key:s,label:e.label,icon:e.icon,count:e.count}))}function U(n,t,r){return t===j?n:n.filter(s=>{const e=s[r];return e==null?!1:Array.isArray(e)?e.some(o=>b(o)===t):b(e)===t})}function Y(n,t){const r=Array.isArray(n)?n:[],s=h.useMemo(()=>t?.field?t.field:G(r),[r,t?.field]),e=h.useMemo(()=>{if(!s)return[];const d=K(r,s);return t?.showAll!==!1?[{key:j,label:t?.allLabel??"All",icon:t?.allIcon,count:r.length},...d]:d},[r,s,t?.showAll,t?.allLabel,t?.allIcon]),o=h.useMemo(()=>t?.defaultFilter&&e.some(m=>m.key===t.defaultFilter)?t.defaultFilter:e[0]?.key??j,[t?.defaultFilter,e]),[l,c]=h.useState(o),f=h.useMemo(()=>s?U(r,l,s):r,[r,l,s]),i=h.useCallback(d=>{c(d)},[]),y=!!(s&&e.length>1);return{filteredItems:f,filterOptions:e,activeFilter:l,setActiveFilter:i,showFilters:y,groupingField:s,showCount:t?.showCount??!1}}function ee({items:n=[],filter:t,filterSize:r="sm",filterClassName:s="",onFilterChange:e,...o}){const l=Array.isArray(n)?n:[],{filteredItems:c,filterOptions:f,activeFilter:i,setActiveFilter:y,showFilters:d,groupingField:m,showCount:A}=Y(l,t),v=F=>{y(F),e?.(F)};return l.length===0?null:g.jsxs("div",{className:"filtered-card-renderer",children:[g.jsx(E,{options:f,activeFilter:i,onFilterChange:v,show:d,groupingField:m,size:r,showCount:A,className:s}),g.jsx("div",{className:"transition-all duration-300 ease-in-out",children:g.jsx(z,{items:c,...o})},i)]})}export{ee as F,z as default};
