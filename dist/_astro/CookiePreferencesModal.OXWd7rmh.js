import{r as n,j as t}from"./react-core.aUjNHagF.js";import{M as C}from"./Modal.CyNMEkPT.js";import{u as N}from"./useCookieStorage.y-2TZ59l.js";import{e as x}from"./scriptManager.C4zn87OF.js";import i from"./Button.DULv1G8J.js";import{T}from"./ToggleControl.DvU705Tk.js";import M from"./Accordion.CDINp7x3.js";import"./consent.Drqa4rP7.js";import"./useVisibility.U53jQVKz.js";const h=[{id:"necessary",title:"Strictly Necessary Cookies",description:"These cookies are essential for the website to function properly. They enable core functionality such as security, network management, and accessibility.",required:!0},{id:"functional",title:"Functional Cookies",description:"These cookies enable the website to provide enhanced functionality and personalization. They may be set by us or by third party providers."},{id:"performance",title:"Performance Cookies",description:"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site."},{id:"targeting",title:"Targeting Cookies",description:"These cookies may be set through our site by our advertising partners to build a profile of your interests and show you relevant adverts."}];function S({isOpen:g,onClose:r}){const{getCookie:l,setCookie:d}=N(),[m,p]=n.useTransition(),y=n.useMemo(()=>{const e=l("cookie-consent");if(e)try{return JSON.parse(e)}catch(o){console.error("Failed to parse cookie consent:",o)}return{necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()}},[l]),[f,b]=n.useState(y),u=h.map((e,o)=>({slug:e.id,title:e.title,description:e.description,contentSlotId:`cookie-category-${o}-content`})),k=(e,o)=>{e!=="necessary"&&b(a=>({...a,[e]:typeof o=="boolean"?o:!a[e]}))},v=()=>{const e={necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()};d("cookie-consent",JSON.stringify(e),{expires:365}),x(),window.dispatchEvent(new Event("consent-changed")),p(()=>{r()})},w=()=>{const e={...f,timestamp:Date.now()};d("cookie-consent",JSON.stringify(e),{expires:365}),x(),window.dispatchEvent(new Event("consent-changed")),p(()=>{r()})};return t.jsxs(C,{isOpen:g,onClose:r,closeButton:!0,className:"bg-bg rounded-2xl p-8 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",overlayClass:"bg-black/60",ariaLabel:"Manage cookie consent preferences",ssr:!1,children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-heading mb-4",children:"Manage Consent Preferences"}),t.jsxs("p",{className:"text-text text-sm leading-relaxed mb-3",children:["We use cookies and similar technologies to help personalize content and offer a better experience. You can click"," ",t.jsx(i,{variant:"link",href:"/cookie-policy",children:"here"})," ","to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer."]}),t.jsxs(i,{variant:"link",href:"/cookie-policy",children:["More information",t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),t.jsx(M,{allowMultiple:!0,className:"space-y-3",items:u,headerSlot:({item:e,id:o,expanded:a})=>{const s=h.find(c=>c.id===e.slug);if(!s)return null;const j=`${o}-toggle`;return t.jsxs("div",{className:"flex items-center gap-3 w-full",children:[t.jsx("span",{className:"font-semibold text-heading text-base flex-1",children:s.title}),t.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[s.required&&t.jsx("span",{className:"text-sm font-semibold text-primary",children:"Always Active"}),t.jsx(T,{label:s.title,description:s.description,checked:f[s.id],onChange:c=>k(s.id,c),disabled:s.required,id:j,bordered:!1,className:"py-0",hideText:!0,size:"lg"})]})]})}}),u.map((e,o)=>t.jsx("div",{id:`cookie-category-${o}-content`,style:{display:"none"},children:t.jsx("p",{className:"text-sm text-text leading-relaxed",children:e.description})},e.slug)),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8",children:[t.jsx(i,{variant:"secondary",onClick:v,className:"flex-1 rounded-xl border-2 border-primary bg-bg px-6 py-4 font-semibold text-primary transition-colors hover:bg-primary/10 disabled:opacity-50",type:"button",disabled:m,children:"Reject All"}),t.jsx(i,{variant:"primary",onClick:w,className:"flex-1 rounded-xl bg-primary px-6 py-4 font-semibold text-bg transition-colors hover:bg-primary-700 disabled:opacity-50",type:"button",disabled:m,children:"Confirm My Choices"})]})]})}const O=n.memo(S);export{O as default};
