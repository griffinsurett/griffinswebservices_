import{r,j as e}from"./react-core.INjS0cla.js";import{M as D,T as p}from"./CookieConsentBanner.DxX2CLAY.js";import{u as O}from"./theme-accent.nrj1wbSn.js";import{A as M}from"./ui-primitives.DGF9WuTk.js";import{B as A}from"./accordion.C2m3DDzX.js";import{a as S,g as L}from"./theme-language.DZn1Ksme.js";import{u as V,g as U,e as F,a as Y,h as q}from"./scriptManager.jKgPrBry.js";/* empty css                                   */import"./lazy-utils.ECN5eyGF.js";import"./theme-shared.CIwfITTU.js";import"./visibility-hooks.CrGIozah.js";import"./engagement-hooks.CKajifgp.js";const R={text:{fontSize:100,lineHeight:1.5,letterSpacing:0,wordSpacing:0,fontFamily:"default",fontWeight:"normal",textAlign:"left"},visual:{linkHighlight:!1,titleHighlight:!1,contrastBoost:!1,saturation:"normal"},reading:{readingGuide:!1,readingMask:!1,focusHighlight:!1,bigCursor:!1,pauseAnimations:!1},content:{hideImages:!1,muteSounds:!1,reducedMotion:!1},timestamp:Date.now(),version:"1.0"};let w=null,C=null;function _(){if(!w&&(w=t=>{const n=document.querySelector("[data-reading-guide]");n&&(n.style.top=`${t.clientY}px`)},document.addEventListener("mousemove",w,{passive:!0}),!document.querySelector("[data-reading-guide]"))){const t=document.createElement("div");t.setAttribute("data-reading-guide","true"),t.style.cssText=`
      position: fixed;
      left: 0;
      right: 0;
      height: 2px;
      background-color: rgba(255, 0, 0, 0.6);
      pointer-events: none;
      z-index: 9999;
      box-shadow: 0 0 8px rgba(255, 0, 0, 0.4);
    `,document.body.appendChild(t)}}function I(){w&&(document.removeEventListener("mousemove",w),w=null);const t=document.querySelector("[data-reading-guide]");t&&t.remove()}function J(){C||(C=t=>{document.documentElement.style.setProperty("--cursor-x",`${t.clientX}px`),document.documentElement.style.setProperty("--cursor-y",`${t.clientY}px`)},document.addEventListener("mousemove",C,{passive:!0}))}function B(){C&&(document.removeEventListener("mousemove",C),C=null)}function X(t){const n=document.documentElement;console.log("ðŸŽ¨ Applying accessibility preferences:",t),n.style.setProperty("--a11y-font-size",`${t.text.fontSize}%`),n.style.setProperty("--a11y-line-height",`${t.text.lineHeight}`),n.style.setProperty("--a11y-letter-spacing",`${t.text.letterSpacing}em`),n.style.setProperty("--a11y-word-spacing",`${t.text.wordSpacing}em`),n.setAttribute("data-a11y-font",t.text.fontFamily),n.style.fontWeight=t.text.fontWeight,document.body&&(document.body.style.textAlign=t.text.textAlign),n.setAttribute("data-a11y-links",t.visual.linkHighlight?"true":"false"),n.setAttribute("data-a11y-titles",t.visual.titleHighlight?"true":"false"),n.setAttribute("data-a11y-contrast",t.visual.contrastBoost?"boost":"normal"),n.setAttribute("data-a11y-saturation",t.visual.saturation),n.setAttribute("data-a11y-focus",t.reading.focusHighlight?"true":"false"),n.setAttribute("data-a11y-cursor",t.reading.bigCursor?"big":"normal"),n.setAttribute("data-a11y-mask",t.reading.readingMask?"true":"false"),t.reading.pauseAnimations?(n.style.setProperty("--a11y-animation-duration","0.01ms"),n.setAttribute("data-a11y-animations","true")):(n.style.removeProperty("--a11y-animation-duration"),n.removeAttribute("data-a11y-animations")),t.reading.readingGuide?_():I(),t.reading.readingMask?J():B(),n.setAttribute("data-a11y-images",t.content.hideImages?"hide":"show"),n.setAttribute("data-a11y-sounds",t.content.muteSounds?"mute":"play"),n.setAttribute("data-a11y-motion",t.content.reducedMotion?"reduced":"normal"),console.log("âœ… Accessibility preferences applied successfully")}function K(){const t=document.documentElement;console.log("ðŸ§¹ Removing all accessibility preferences"),t.style.removeProperty("--a11y-font-size"),t.style.removeProperty("--a11y-line-height"),t.style.removeProperty("--a11y-letter-spacing"),t.style.removeProperty("--a11y-word-spacing"),t.style.removeProperty("--a11y-animation-duration"),t.style.fontWeight="",document.body&&(document.body.style.textAlign=""),t.removeAttribute("data-a11y-font"),t.removeAttribute("data-a11y-links"),t.removeAttribute("data-a11y-titles"),t.removeAttribute("data-a11y-contrast"),t.removeAttribute("data-a11y-saturation"),t.removeAttribute("data-a11y-focus"),t.removeAttribute("data-a11y-cursor"),t.removeAttribute("data-a11y-mask"),t.removeAttribute("data-a11y-images"),t.removeAttribute("data-a11y-sounds"),t.removeAttribute("data-a11y-motion"),t.removeAttribute("data-a11y-animations"),I(),B()}function Q(){const[t,n]=O("user-a11y-prefs",R,{raw:!1,syncTabs:!0,validate:i=>i&&typeof i=="object"&&"text"in i&&"visual"in i&&"reading"in i&&"content"in i});return r.useEffect(()=>{console.log("ðŸ”„ Preferences changed, applying:",t),X(t)},[t]),{preferences:t,setPreferences:n,resetPreferences:()=>{console.log("ðŸ”„ Resetting to default preferences"),K(),n(R)}}}function k({title:t,children:n}){return e.jsxs("section",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-bold text-heading mb-4 pb-2 border-b-2 border-primary",children:t}),e.jsx("div",{children:n})]})}function N({label:t,description:n,value:c,min:i,max:g,step:l,suffix:u="",onChange:s,id:m}){const h=r.useId(),o=m??h,d=n?`${o}-description`:void 0,[b,y]=r.useState(!1),v=r.useCallback(()=>y(!0),[]),a=r.useCallback(()=>y(!1),[]),f=r.useCallback(()=>y(!1),[]);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[e.jsx("label",{className:"font-semibold text-heading",htmlFor:o,children:t}),e.jsxs("span",{className:"text-sm font-mono text-text",children:[c,u]})]}),n&&e.jsx("p",{id:d,className:"text-sm text-text mb-3",children:n}),e.jsx(M,{variant:"solid",triggers:"controlled",active:b,duration:900,borderWidth:2,borderRadius:"rounded-xl",color:"var(--color-accent)",className:"block",innerClassName:"!bg-transparent !border-transparent rounded-xl",children:e.jsx("div",{className:"rounded-xl border border-accent/30 px-4 py-3 bg-transparent",children:e.jsx("input",{id:o,type:"range",min:i,max:g,step:l,value:c,"aria-valuemin":i,"aria-valuemax":g,"aria-valuenow":c,"aria-describedby":d,onChange:x=>s(parseFloat(x.target.value)),onFocus:v,onBlur:a,onMouseDown:v,onMouseUp:f,onTouchStart:v,onTouchEnd:f,className:"w-full h-2 bg-text/20 rounded-lg appearance-none cursor-pointer accent-primary"})})}),e.jsxs("div",{className:"flex justify-between text-xs text-text mt-2",children:[e.jsxs("span",{children:[i,u]}),e.jsxs("span",{children:[g,u]})]})]})}function Z({name:t,label:n,required:c=!1,options:i,placeholder:g="Select an option",containerClassName:l="space-y-2",labelClassName:u="block text-sm text-text/80",selectClassName:s="",showLabel:m=!0,labelHidden:h=!1,describedBy:o,borderDuration:d=900,borderWidth:b=2,borderRadius:y="rounded-xl",id:v,onFocus:a,onBlur:f,...x}){const[z,P]=r.useState(!1),T=r.useId(),H=v??`${t}-${T}`,$=r.useCallback(j=>{P(!0),a?.(j)},[a]),W=r.useCallback(j=>{P(!1),f?.(j)},[f]),G=[u,!m||h?"sr-only":""].filter(Boolean).join(" ");return e.jsxs("div",{className:l,children:[n&&e.jsxs("label",{htmlFor:H,className:G,children:[n,c&&e.jsx("span",{"aria-hidden":"true",children:" *"})]}),e.jsx(M,{variant:"solid",triggers:"controlled",active:z,duration:d,borderWidth:b,borderRadius:y,color:"var(--color-accent)",innerClassName:`!bg-transparent !border-transparent p-0 ${y}`,children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:H,name:t,required:c,"aria-required":c||void 0,"aria-describedby":o,className:`form-field appearance-none pr-10 ${s}`.trim(),onFocus:$,onBlur:W,...x,children:[g&&e.jsx("option",{value:"",className:"form-option",disabled:!0,children:g}),i.map(j=>e.jsx("option",{value:j.value,className:"form-option",children:j.label},j.value))]}),e.jsx("svg",{"aria-hidden":"true",className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-primary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"6,9 12,15 18,9"})})]})})]})}function ee({label:t,description:n,value:c,options:i,onChange:g,id:l}){const u=r.useId(),s=l??u,m=n?`${s}-description`:void 0,h=o=>{g(o.target.value)};return e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"block font-semibold text-heading",htmlFor:s,id:`${s}-label`,children:t}),n&&e.jsx("p",{id:m,className:"text-sm text-text",children:n})]}),e.jsx(Z,{id:s,name:s,label:t,showLabel:!1,value:c,options:i,"aria-describedby":m,placeholder:"",onChange:h})]})}function E({label:t,description:n,value:c,options:i,onChange:g}){const l=r.useId();return e.jsxs("div",{className:"mb-6",role:"group","aria-labelledby":l,children:[e.jsx("label",{id:l,className:"block font-semibold text-heading mb-2",children:t}),n&&e.jsx("p",{className:"text-sm text-text mb-3",children:n}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(u=>{const s=u.value===c;return e.jsx(A,{type:"button",onClick:()=>g(u.value),variant:s?"primary":"secondary","aria-pressed":s,children:u.label},u.value)})})]})}function te(){const{getCookie:t}=V(),n=r.useMemo(()=>U(),[t]),c=n!==null,i=l=>q(l),g=l=>{Y(l)};return r.useEffect(()=>{if(typeof window>"u")return;const l=s=>{s.key==="cookie-consent-changed"&&(console.log("ðŸ”„ Consent changed, re-evaluating scripts"),F())},u=()=>{console.log("ðŸ”„ Consent changed, re-evaluating scripts"),F()};return window.addEventListener("storage",l),window.addEventListener("consent-changed",u),()=>{window.removeEventListener("storage",l),window.removeEventListener("consent-changed",u)}},[]),{consent:n,hasConsent:c,hasConsentFor:i,enableScripts:g}}function ne(){const[t,n]=r.useState(!1),c=r.useRef(null),i=r.useRef(null),{hasConsentFor:g}=te(),l=g("functional"),u=()=>{if(typeof window>"u")return S[0];const o=localStorage.getItem("user-language")||"en";return L(o)||S[0]},[s,m]=r.useState(u);r.useEffect(()=>{function o(d){c.current&&i.current&&!c.current.contains(d.target)&&!i.current.contains(d.target)&&n(!1)}if(t)return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[t]),r.useEffect(()=>{function o(d){d.key==="Escape"&&t&&(n(!1),i.current?.focus())}if(t)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r.useEffect(()=>{const o=d=>{if(d.key!=="user-language")return;const b=L(d.newValue||"en")||S[0];m(b)};return window.addEventListener("storage",o),()=>window.removeEventListener("storage",o)},[]);const h=o=>{if(!l){alert("Please enable functional cookies to use the language switcher. You can manage your preferences in the cookie settings.");return}n(!1);const d=L(o);d&&m(d),typeof window<"u"&&window.changeLanguage&&window.changeLanguage(o)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:i,type:"button",onClick:()=>n(!t),className:"language-switcher-button notranslate","aria-expanded":t,"aria-haspopup":"listbox","aria-label":"Choose language",title:l?"Choose language":"Enable functional cookies to change language",children:[s.flag&&e.jsx("span",{className:"text-xl leading-none notranslate","aria-hidden":"true",children:s.flag}),e.jsx("span",{className:"notranslate",children:s.nativeName}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{ref:c,className:"language-dropdown",role:"listbox","aria-hidden":!t,"aria-label":"Available languages",children:[!l&&e.jsx("div",{className:"px-4 py-3 bg-yellow-50 border-b border-yellow-200 text-sm text-yellow-800",children:"Enable functional cookies to use translation"}),S.map(o=>e.jsxs("button",{type:"button",role:"option","aria-selected":o.code===s.code,className:"language-option notranslate",onClick:()=>h(o.code),disabled:!l,style:l?void 0:{opacity:.5,cursor:"not-allowed"},children:[o.flag&&e.jsx("span",{className:"language-option-flag notranslate","aria-hidden":"true",children:o.flag}),e.jsxs("div",{className:"language-option-text",children:[e.jsx("div",{className:"notranslate",children:o.nativeName}),e.jsx("div",{className:"language-option-native notranslate",children:o.name})]}),o.code===s.code&&e.jsx("svg",{className:"w-5 h-5 text-primary flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},o.code))]})]})}function ae({isOpen:t,onClose:n}){const{preferences:c,setPreferences:i,resetPreferences:g}=Q(),[l,u]=r.useTransition(),[s,m]=r.useState(c);r.useEffect(()=>{m(c)},[c]);const h=(a,f)=>{m(x=>({...x,text:{...x.text,[a]:f}}))},o=(a,f)=>{m(x=>({...x,visual:{...x.visual,[a]:f}}))},d=(a,f)=>{m(x=>({...x,reading:{...x.reading,[a]:f}}))},b=(a,f)=>{m(x=>({...x,content:{...x.content,[a]:f}}))},y=()=>{console.log("ðŸ’¾ Saving preferences"),i({...s,timestamp:Date.now(),version:"1.0"}),u(()=>{n()})},v=()=>{console.log("ðŸ”„ Resetting preferences"),g(),m(c),u(()=>{n()})};return e.jsxs(D,{isOpen:t,onClose:n,closeButton:!0,className:"bg-bg rounded-lg p-8 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto",overlayClass:"bg-black/50",ariaLabel:"Reading preferences",ssr:!1,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Reading Preferences"}),e.jsx("p",{className:"text-sm text-text",children:"Customize how content appears on this site. These preferences are saved locally and sync across tabs."})]}),e.jsx(k,{title:"Language",children:e.jsx(ne,{})}),e.jsxs(k,{title:"Text & Typography",children:[e.jsx(N,{label:"Font Size",description:"Adjust the size of text throughout the site",value:s.text.fontSize,min:100,max:200,step:10,suffix:"%",onChange:a=>h("fontSize",a)}),e.jsx(N,{label:"Line Height",description:"Spacing between lines of text",value:s.text.lineHeight,min:1.5,max:2.5,step:.1,onChange:a=>h("lineHeight",a)}),e.jsx(N,{label:"Letter Spacing",description:"Space between individual letters",value:s.text.letterSpacing,min:0,max:.3,step:.05,suffix:"em",onChange:a=>h("letterSpacing",a)}),e.jsx(N,{label:"Word Spacing",description:"Space between words",value:s.text.wordSpacing,min:0,max:.5,step:.1,suffix:"em",onChange:a=>h("wordSpacing",a)}),e.jsx(ee,{label:"Font Family",description:"Choose a font that's easier for you to read",value:s.text.fontFamily,options:[{value:"default",label:"Site Default"},{value:"dyslexia",label:"Dyslexia-Friendly (OpenDyslexic)"},{value:"readable",label:"High Readability (Verdana)"}],onChange:a=>h("fontFamily",a)}),e.jsx(E,{label:"Font Weight",value:s.text.fontWeight,options:[{value:"normal",label:"Normal"},{value:"semibold",label:"Semibold"},{value:"bold",label:"Bold"}],onChange:a=>h("fontWeight",a)}),e.jsx(E,{label:"Text Alignment",value:s.text.textAlign,options:[{value:"left",label:"Left"},{value:"justify",label:"Justify"}],onChange:a=>h("textAlign",a)})]}),e.jsxs(k,{title:"Visual Enhancements",children:[e.jsx(p,{label:"Highlight Links",description:"Add background color to all clickable links",checked:s.visual.linkHighlight,onChange:a=>o("linkHighlight",a)}),e.jsx(p,{label:"Highlight Headings",description:"Emphasize page headings with background and border",checked:s.visual.titleHighlight,onChange:a=>o("titleHighlight",a)}),e.jsx(p,{label:"Boost Contrast",description:"Slightly increase overall contrast (may make colors more vibrant)",checked:s.visual.contrastBoost,onChange:a=>o("contrastBoost",a)}),e.jsx(E,{label:"Color Saturation",value:s.visual.saturation,options:[{value:"normal",label:"Normal"},{value:"low",label:"Low"},{value:"high",label:"High"},{value:"monochrome",label:"Grayscale"}],onChange:a=>o("saturation",a)})]}),e.jsxs(k,{title:"Reading Aids",children:[e.jsx(p,{label:"Reading Guide",description:"Horizontal line that follows your cursor to help track lines",checked:s.reading.readingGuide,onChange:a=>d("readingGuide",a)}),e.jsx(p,{label:"Reading Mask",description:"Dim the page except for the area around your cursor",checked:s.reading.readingMask,onChange:a=>d("readingMask",a)}),e.jsx(p,{label:"Focus Highlighting",description:"Add strong outline to focused elements for easier keyboard navigation",checked:s.reading.focusHighlight,onChange:a=>d("focusHighlight",a)}),e.jsx(p,{label:"Big Cursor",description:"Increase cursor size for better visibility",checked:s.reading.bigCursor,onChange:a=>d("bigCursor",a)}),e.jsx(p,{label:"Pause Animations",description:"Stop all animations and auto-playing content",checked:s.reading.pauseAnimations,onChange:a=>d("pauseAnimations",a)})]}),e.jsxs(k,{title:"Content Simplification",children:[e.jsx(p,{label:"Hide Images",description:"Replace images with their text descriptions",checked:s.content.hideImages,onChange:a=>b("hideImages",a)}),e.jsx(p,{label:"Mute Sounds",description:"Hide all audio and video elements",checked:s.content.muteSounds,onChange:a=>b("muteSounds",a)}),e.jsx(p,{label:"Reduce Motion",description:"Minimize all animations and transitions (recommended for vestibular disorders)",checked:s.content.reducedMotion,onChange:a=>b("reducedMotion",a)})]}),e.jsxs("div",{className:"text-xs text-text mt-8 p-4 bg-text/5 rounded-lg border border-surface",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“Œ Important Information:"}),e.jsxs("ul",{className:"space-y-1.5 list-disc list-inside",children:[e.jsx("li",{children:"These preferences only change how content appears to you visually"}),e.jsx("li",{children:"They don't affect the underlying accessibility of the site"}),e.jsx("li",{children:"If you use screen readers or assistive technology, those will continue working normally"}),e.jsx("li",{children:"Settings are saved in your browser and sync across tabs automatically"}),e.jsxs("li",{children:["For accessibility support, please"," ",e.jsx(A,{variant:"link",size:"sm",href:"/contact",children:"contact us"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(A,{variant:"secondary",onClick:v,disabled:l,className:"flex-1",children:"Reset All"}),e.jsx(A,{variant:"primary",onClick:y,disabled:l,className:"flex-1",children:"Save Preferences"})]})]})}const fe=r.memo(ae);export{fe as default};
