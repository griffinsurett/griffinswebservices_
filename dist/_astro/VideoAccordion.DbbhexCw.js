import{j as t,r as a}from"./react-core.Dcp9QKwj.js";import{A as D}from"./Textarea.CNTELKwz.js";import{I as M}from"./IconListItem.D96u7GZF.js";import S from"./Button.CICNViMk.js";import{u as z}from"./useVisibility.Bq4X3Whu.js";import{u as U}from"./useEngagementAutoplay.y8I7cY0I.js";import{a as L}from"./Counter.rbBGYAKt.js";function B({icon:l,title:f,description:c,isActive:o,progress:s=0,onToggle:u,children:m,className:x=""}){return t.jsx("div",{className:`group relative ${x}`.trim(),"data-accordion-item":!0,"data-active":o?"true":"false",children:t.jsxs(D,{variant:"progress",triggers:"controlled",active:o,controller:s,duration:300,borderRadius:"rounded-3xl",borderWidth:2,className:"transition-all duration-200",innerClassName:"card-bg",children:[t.jsxs(S,{variant:"link",type:"button",className:"w-full text-left flex items-center justify-between p-5 hover:bg-card/50 transition-colors duration-300 cursor-pointer relative z-20",onClick:u,onMouseDown:d=>d.preventDefault(),"aria-expanded":o,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[l&&t.jsx("span",{className:"icon-large card-icon-color shrink-0",children:l.includes(":")?t.jsx(M,{icon:l,size:"lg",className:"w-6 h-6"}):t.jsx("span",{className:"text-2xl leading-none",children:l})}),t.jsx("div",{className:"text-left",children:t.jsx("p",{className:"h4",children:f})})]}),t.jsx("div",{className:`
              w-8 h-8 rounded-full flex items-center justify-center
              transition-all duration-[600ms] text-xl font-semibold
              ${o?"bg-primary text-bg":"bg-primary/15 text-accent group-hover:bg-primary/25"}
            `,"aria-hidden":"true",children:t.jsx("span",{className:"translate-y-[-1px]",children:o?"âˆ’":"+"})})]}),t.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out relative z-20 ${o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsxs("div",{className:"px-6 pb-6",children:[t.jsx("div",{className:"w-full h-px bg-primary/15 mb-4"}),c&&t.jsx("p",{className:"text-text/80 leading-relaxed mb-4",children:c}),m]})})]})})}const V=a.forwardRef(function({desktop:f=!1,className:c="",wrapperClassName:o="",overlay:s,autoPlay:u,muted:m,playsInline:x,controls:d,preload:i,...h},v){const g=f?"w-full h-[24rem] object-cover rounded-2xl":"w-full aspect-video object-cover rounded-2xl",b=u??!0,w=m??!0,N=x??!0,p=d??f,j=i??"metadata";return t.jsxs("div",{className:`relative rounded-2xl overflow-hidden bg-card/40 ${o}`.trim(),children:[t.jsx("video",{ref:v,className:`${g} ${c}`.trim(),autoPlay:b,muted:w,playsInline:N,controls:p,preload:j,...h}),s]})}),O=l=>l.replace(/[:]/g,"");function Z({items:l,className:f="",autoAdvanceDelay:c=3e3}){const s=Array.isArray(l)?l.filter(e=>!!e&&typeof e=="object"&&!!e.title):[],u=a.useRef(null),m=a.useRef(null),[x,d]=a.useState(0),[i,h]=a.useState(0),v=a.useId(),g=a.useMemo(()=>O(v),[v]),b=a.useRef(null),w=z(b,{threshold:0,rootMargin:"0px 0px -20% 0px"}),N=a.useCallback(()=>{const e=u.current,r=m.current;let n=null;return e&&!e.paused&&e.currentTime>0?n=e:r&&!r.paused&&r.currentTime>0?n=r:e&&e.offsetParent!==null?n=e:r&&r.offsetParent!==null?n=r:n=e||r,!n||!Number.isFinite(n.duration)?c:Math.max(0,(n.duration-n.currentTime)*1e3)+c},[c]),{engageUser:p,beginGraceWindow:j,isAutoplayPaused:W,isResumeScheduled:F,userEngaged:G,schedule:k}=U({totalItems:s.length,currentIndex:i,setIndex:e=>h(e),autoplayTime:N,resumeDelay:5e3,containerSelector:`[data-video-accordion="${g}"]`,itemSelector:`[data-video-accordion="${g}"] [data-accordion-item]`,inView:w,engageOnlyOnActiveItem:!0,activeItemAttr:"data-active"}),y=a.useRef(null);a.useEffect(()=>{y.current=k},[k]),a.useEffect(()=>{s.length!==0&&i>=s.length&&h(0)},[i,s.length]);const A=a.useCallback(e=>{h(e),d(0),p(),y.current?.()},[p]),I=a.useCallback(()=>{const e=u.current,r=m.current;return e&&!e.paused&&e.currentTime>0?e:r&&!r.paused&&r.currentTime>0?r:e&&e.offsetParent!==null?e:r&&r.offsetParent!==null?r:e||r},[]),C=a.useCallback(()=>{const e=I();!e||!e.duration||(d(e.currentTime/e.duration*100),y.current?.())},[I]),P=a.useCallback(()=>{d(0),y.current?.()},[]),R=a.useCallback(()=>{d(100),j()},[j]),$=a.useCallback(()=>{p()},[p]);if(s.length===0)return null;const E=s[Math.min(i,s.length-1)];return t.jsx("div",{ref:b,...L("fade-in",{once:!0}),className:`relative ${f}`.trim(),"data-video-accordion":g,children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-12 max-2-primary",children:[t.jsx("div",{className:"min-w-0 lg:w-1/2 lg:shrink-0 flex flex-col space-y-4","data-accordion-container":!0,children:s.map((e,r)=>{const n=e.key||e.title||`item-${r}`;return t.jsxs(B,{icon:e.icon,title:e.title,description:e.description,isActive:i===r,progress:x,onToggle:()=>A(r),children:[i===r&&t.jsx("div",{className:"lg:hidden mt-4",children:t.jsx(V,{ref:T=>{m.current=T},src:e.videoSrc,onTimeUpdate:C,onEnded:R,onLoadedData:P,onClick:$,desktop:!1},`mobile-${n}`)}),e.hasPage&&e.url&&t.jsx("div",{className:"mt-4",children:t.jsxs(S,{variant:"link",href:e.url,rightIcon:"lu:arrow-right",children:["Explore ",e.title]})})]},n)})}),t.jsxs("div",{className:"hidden lg:block lg:w-1/2 min-w-0 sticky-section",children:[t.jsx(V,{ref:u,src:E?.videoSrc,onTimeUpdate:C,onEnded:R,onLoadedData:P,onClick:$,desktop:!0,wrapperClassName:"shadow-2xl shadow-accent/15 bg-card/40"},`desktop-${E?.key??i}`),!1]})]})})}export{Z as default};
