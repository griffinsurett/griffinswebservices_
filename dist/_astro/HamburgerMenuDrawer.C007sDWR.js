import{r as l,aV as R,j as t}from"./react-core.WNgh4ro3.js";import{B as L}from"./accordion.DdLMpgB7.js";import{I as M}from"./ui-primitives.EBI0wAJQ.js";let w=null;function S(){return w||(typeof document>"u"?null:(w=document.body,w))}const $={center:"flex items-center justify-center","bottom-left":"flex items-end justify-start p-4","bottom-right":"flex items-end justify-end p-4","top-left":"flex items-start justify-start p-4","top-right":"flex items-start justify-end p-4"};function I({isOpen:e,onClose:a,children:s,closeButton:r=!0,closeButtonClass:i="absolute top-4 right-4",overlayClass:m="bg-black bg-opacity-50",className:c="bg-bg shadow-xl p-6 rounded-lg max-w-lg w-full mx-4",allowScroll:u=!1,ariaLabel:b,ariaDescribedBy:x,position:y="center",ssr:g=!0}){const[d,p]=l.useState(g?e:!1),h=l.useRef(null);l.useEffect(()=>{!g&&!d&&p(!0)},[g,d]),l.useEffect(()=>{e&&p(!0)},[e]),l.useEffect(()=>{if(!d||!e||u)return;const n=document.body.style.overflow,f=document.body.style.paddingRight,v=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",v>0&&(document.body.style.paddingRight=`${v}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=f}},[d,e,u]),l.useEffect(()=>{if(!d||!e)return;const n=f=>{f.key==="Escape"&&a()};return document.addEventListener("keydown",n,{passive:!0}),()=>{document.removeEventListener("keydown",n)}},[d,e,a]);const E=()=>{e||p(!1)},C=n=>{n.target===n.currentTarget&&a()},j=n=>{n.stopPropagation()},N=e?"pointer-events-auto":"pointer-events-none";if(!g&&!d||!d)return null;const o=S();return o?R.createPortal(t.jsx("div",{className:`fixed inset-0 z-[9999] ${$[y]} ${m} transform transition-opacity duration-300 ease-in-out ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:C,onTransitionEnd:E,role:"dialog","aria-modal":"true","aria-label":b,"aria-describedby":x,children:t.jsxs("div",{ref:h,className:`relative ${c} ${N} transform-gpu transition-all duration-300 ease-in-out origin-center ${e?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-4 opacity-0"}`,onClick:j,tabIndex:-1,children:[r&&t.jsx("button",{onClick:a,className:i,"aria-label":"Close modal",type:"button",children:t.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),s]})}),o):null}const T=l.memo(I),_="__GREASTRO_CLIENT_CLICK_HANDLERS__",A="greastro-custom-hydrations",k=()=>{const e=globalThis;return e[_]||(e[_]=new Map),e[_]},P=()=>{const e=globalThis;return e.__GREASTRO_CLIENT_CLICK_PENDING__||(e.__GREASTRO_CLIENT_CLICK_PENDING__=new Map),e.__GREASTRO_CLIENT_CLICK_PENDING__},B=(e,a)=>{const s=P(),r=s.get(e);if(r?.length){s.delete(e);for(const i of r)try{i(a)}catch{}}},D=e=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(A,{detail:{key:e}}))},G=(e,a)=>{const s=()=>{const m=k().get(e);!m||m!==a||(B(e,a.handler),D(e))},r=typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window:null;if(r){r.requestAnimationFrame(()=>{r.requestAnimationFrame(()=>{s()})});return}if(typeof setTimeout=="function"){setTimeout(s,0);return}s()},H=(e,a)=>{if(!e)return;const s=k(),r={handler:a};s.set(e,r),G(e,r)},K=(e,a)=>{if(!e)return;const s=k(),r=s.get(e);!r||r.handler!==a||s.delete(e)};function W({title:e,url:a,children:s=[],openInNewTab:r=!1,onNavigate:i,onOpenSubmenu:m}){const c=s.length>0,u=()=>{c&&m?.({title:e,items:s})},b=()=>{if(a){i();return}u()};return c?t.jsx("li",{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(L,{variant:"menuItemButton",className:"hover-emphasis-text inline-flex items-center gap-2 text-left",onClick:b,...a?{href:a,target:r?"_blank":void 0,rel:r?"noopener noreferrer":void 0}:{type:"button"},children:e}),t.jsx("button",{type:"button",onClick:u,"aria-label":`View submenu for ${e}`,className:"text-text",children:t.jsx(M,{icon:"lu:chevron-right",size:"md",className:"w-6 h-6"})})]})}):t.jsx("li",{children:t.jsx(L,{variant:"menuItemButton",href:a||"#",onClick:i,target:r?"_blank":void 0,rel:r?"noopener noreferrer":void 0,className:"hover-emphasis-text",children:e})})}function q({isOpen:e,onChange:a,className:s="",ariaLabel:r="Toggle menu",hamburgerTransform:i=!0,...m}){const c=i&&e;return t.jsxs("button",{type:"button","aria-label":r,"aria-expanded":e,onClick:()=>a(!e),className:`group relative h-6 w-7 cursor-pointer flex flex-col justify-between items-start text-text hover:text-heading ${s}`.trim(),...m,children:[t.jsx("span",{className:`block h-[0.5px] w-full bg-current transition-all duration-300 ${c?"absolute top-1/2 -translate-y-1/2 rotate-45":""}`}),t.jsx("span",{className:`block h-[0.5px] bg-current transition-all duration-300 ${c?"opacity-0 w-full":"opacity-100 w-5 group-hover:w-full"}`}),t.jsx("span",{className:`block h-[0.5px] w-full bg-current transition-all duration-300 ${c?"absolute top-1/2 -translate-y-1/2 -rotate-45":""}`})]})}function z({items:e,className:a="",hamburgerTransform:s=!0,closeButton:r=!1,triggerId:i="mobile-menu-toggle",useExternalTrigger:m=!1,clientClickHandlerKey:c}){const[u,b]=l.useState(!1),[x,y]=l.useState(()=>[{title:"Main Menu",items:e}]),g=l.useRef(i);g.current=i;const d=l.useCallback(()=>{y([{title:"Main Menu",items:e}])},[e]);l.useEffect(()=>{d()},[d]);const p=l.useCallback(o=>{const n=document.getElementById(g.current);n&&n.setAttribute("aria-expanded",String(o))},[]),h=l.useCallback(o=>{b(n=>{const f=typeof o=="boolean"?o:!n;return f||d(),p(f),f})},[d,p]);l.useEffect(()=>{p(u)},[u,p]),l.useEffect(()=>{if(!m)return;const o=document.getElementById(i);if(!o)return;const n=()=>h();return o.addEventListener("click",n),()=>o.removeEventListener("click",n)},[i,h,m]),l.useEffect(()=>{if(!c)return;const o=()=>(h(),!0);return H(c,o),()=>{K(c,o)}},[c,h]);const E=()=>{h(!1)},C=(o,n)=>{n?.length&&y(f=>[...f,{title:o,items:n}])},j=()=>{y(o=>o.length>1?o.slice(0,-1):o)},N=(x.length-1)*100;return t.jsxs(t.Fragment,{children:[!m&&t.jsx(q,{isOpen:u,onChange:o=>h(o),hamburgerTransform:s,ariaLabel:u?"Close menu":"Open menu",id:i}),t.jsx(T,{isOpen:u,onClose:()=>h(!1),position:"center",className:`w-full max-w-full h-full bg-gradient p-0 rounded-none transform transition-transform duration-300 ease-out ${u?"translate-y-0":"translate-y-full"}`,overlayClass:`bg-black/50 transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`,closeButton:r,ariaLabel:"Mobile navigation menu",ssr:!1,children:t.jsx("nav",{className:`${a} h-full w-full flex flex-col justify-center overflow-hidden`,"aria-label":"Mobile navigation",children:t.jsx("div",{className:"inner-section my-auto py-4",style:{maxHeight:"calc(100vh - 6rem)"},children:t.jsx("div",{className:"relative w-full h-full overflow-hidden",children:t.jsx("div",{className:"flex h-full transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${N}%)`},children:x.map((o,n)=>t.jsxs("div",{className:"w-full flex-shrink-0 h-full flex flex-col relative","aria-hidden":n!==x.length-1,children:[n>0&&t.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-2 text-text hover:underline absolute left-0 top-0","aria-label":`Go back to ${x[n-1]?.title??"previous menu"}`,children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("div",{className:`flex-1 overflow-y-auto overflow-x-hidden pr-2 ${n>0?"pt-12":""}`,children:t.jsx("ul",{className:"menu-item-spacing pb-10",children:o.items.map(f=>t.jsx(W,{...f,onNavigate:E,onOpenSubmenu:v=>C(v.title,v.items)},f.slug||f.id))})})]},`${o.title}-${n}`))})})})})})]})}export{T as M,z as a};
