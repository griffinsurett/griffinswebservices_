---
// src/layouts/Footer.astro
/**
 * Footer Component
 *
 * Site-wide footer with:
 * - Copyright notice
 * - Social media links
 * - Legal links (Privacy Policy, Cookie Policy)
 * - Cookie preferences button (client-side)
 * - Reading preferences button (client-side)
 */
import { siteData, ctaData } from "@/content/siteData";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { query } from "@/utils/query";
import PreferencesLayout from "./PreferencesLayout.astro";
import { roots, related } from "@/utils/query/snippets";
import Logo from "@/components/Logo/Logo.astro";
import Button from "@/components/Button/Button";
---

<footer class="mt-auto relative border-t border-accent/10 bg-bg2/60">
  <div class="mx-auto w-full relative">
    <div class="section-color-border"></div>

    <div class="relative">
      <section
        class="inner-section flex flex-col gap-10 py-12 text-center lg:text-left md:flex-row md:items-center md:justify-between"
      >
        <div
          class="flex flex-col lg:flex-row justify-center items-center gap-4 lg:gap-7 xl:gap-10"
        >
          <Logo
            loading="lazy"
            trigger="visible"
            class="gap-2"
            animateOutText={false}
            logoMediaClass="block w-[86px] h-[86px] lg:w-[94px] lg:h-[94px] object-contain"
            logoWidths={[90, 160, 220]}
            logoSizes="(min-width: 1024px) 110px, 90px"
            titleFirstClass="text-5xl lg:text-7xl -ml-[0.1rem] leading-tight font-bold no-translate"
            titleRestClass="font-light emphasized-text uppercase sm:text-sm md:text-base lg:text-lg xl:text-xl p-0 m-0 tracking-[0.3em]"
            loop={false}
          />
          {/* Temporarily hiding social media icons */}
          {
            /*
          <ContentRenderer
            query={query("social-media")}
            variant="SocialMediaVariant"
            size="lg"
            alignment="left"
            className="text-bg"
          />
          */
          }
          <ContentRenderer
            query={query("contact-us")}
            variant="ContactListVariant"
            size="lg"
            alignment="left"
            showButtonSection={false}
            showHeadingSection={false}
          />
        </div>
        <div
          class="flex flex-col items-center lg:items-start gap-6 text-sm text-text/80 md:max-w-sm"
        >
          <p class="text-lg md:text-xl text-text font-semibold">
            {
              siteData?.tagline ??
                "Ready to give your business the fast, secure website it deserves?"
            }
          </p>
          <Button
            href={ctaData?.link ?? "/contact-us"}
            variant="primary"
            size="sm"
            rightIcon="lucide:arrow-right"
          >
            {ctaData?.text ?? "Schedule a Consultation"}
          </Button>
        </div>
      </section>
      <div class="section-color-border absolute bottom-0 top-auto"></div>
    </div>

    <div class="relative">
      <section
        class="inner-section flex flex-wrap gap-10 py-12 text-left sm:text-left justify-between"
      >
        {/* Column 2: Legal links & preferences */}
        <div class="flex flex-col items-start gap-8 text-sm">
          <ContentRenderer
            query={related("menu-items", "menu", "footer-menu-2")}
            variant="ListVariant"
            title="Links"
            className="text-bg flex flex-col items-start justify-center"
            showHeadingDivider
          />
          <ContentRenderer
            query={related("menu-items", "menu", "footer-menu")}
            variant="ListVariant"
            title="Legal Links"
            className="text-bg flex flex-col items-start justify-center"
            showHeadingDivider
          />
        </div>

        {/* Column 1: Legal links & preferences */}
        <div class="flex flex-col items-start gap-8 text-sm">
          <ContentRenderer
            query={roots("capabilities")}
            variant="ListVariant"
            showButtonSection={false}
            showHeadingDivider
          />
        </div>

        {/* Column 2: Legal links & preferences */}
        <div class="flex flex-col items-start gap-8 text-sm">
          <ContentRenderer
            query={roots("solutions")}
            variant="ListVariant"
            showButtonSection={false}
            showHeadingDivider
          />
        </div>

        {/* Column 2: Legal links & preferences */}
        <div class="flex flex-col items-start gap-8 text-sm">
          {/* Column 3: Contact-Us */}
          <ContentRenderer
            query={roots("industries")}
            variant="ListVariant"
            showButtonSection={false}
            showHeadingDivider
          />
        </div>
      </section>
      <div class="section-color-border absolute bottom-0 top-auto"></div>
    </div>

    <div class="relative">
      <div class="section-color-border"></div>
      <section
        class="inner-section flex flex-col gap-4 text-text text-sm py-6 sm:flex-row sm:items-center sm:justify-between"
      >
        <p class="text-center sm:text-right">
          &copy; {new Date().getFullYear()}
          {siteData.legalName}. All rights reserved.
        </p>
        <PreferencesLayout
          showHeading={false}
          layout="horizontal"
          class="w-full sm:w-auto"
        />
      </section>
    </div>
  </div>
</footer>
