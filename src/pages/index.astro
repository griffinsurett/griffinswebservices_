---
// src/pages/index.astro
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContentRenderer from "@/components/ContentRenderer/ContentRenderer.astro";
import { query, sortByOrder, sortByDate } from "@/utils/query";
import TextHero from "@/layouts/TextHero.astro";
import { siteData } from "@/content/siteData";
import { roots, byTag } from "@/utils/query/snippets";
import CTASection from "@/layouts/CTASection.astro";
import Video from "@/components/Video/Video.astro";
import PortfolioShowcaseSection from "@/layouts/PortfolioShowcaseSection.astro";
import GradientLayout from "@/layouts/GradientLayout.astro";
import FrontPageHero from "@/layouts/FrontPageHero.astro";
// import FrontPageHero2 from "@/layouts/FrontPageHero2.astro";
import ColorBorderLayout from "@/layouts/ColorBorderLayout.astro";
import DoubleCard from "@/layouts/DoubleCard.astro";
import { animationProps } from "@/integrations/scroll-animations/props";

const heroHeading = {
  before: "Launch a website that works.",
  text: "Fast, secure, growth-ready.",
  after: "",
};

const heroDescription =
  "We're a New Jersey based Web Agency that creates fast, engaging websites built to grow your business. We handle hosting, maintenance, and security â€” and provide full SEO services to help you get found and stay ahead.";
---

<BaseLayout title="Home" description={siteData.description}>
    <!-- <GradientLayout> -->
    <!-- Lightweight text-only hero - zero carousel JS on initial load -->
    <!-- <TextHero
        heading={heroHeading}
        description={heroDescription}
        primaryCTA={{
          text: "Get Started",
          link: "/contact-us",
        }}
        scrollToSection="#portfolio-showcase"
      /> -->

    <FrontPageHero
      heading={heroHeading}
      description={heroDescription}
      primaryCTA={{
        text: "Get Started",
        link: "/contact-us",
      }}
      scrollToSection="#under-hero"
    />

      <!-- <FrontPageHero
      heading={heroHeading}
      description={heroDescription}
      primaryCTA={{
        text: "Get Started",
        link: "/contact-us",
      }}
      scrollToSection="#website-services"
    /> -->
      <div id="under-hero">
    <div
      class="block lg:min-h-screen inner-section"
      {...animationProps("fade-in-up", { once: false, threshold: 0.2 })}
    >
      <ContentRenderer
        query={query("projects")}
        variant="PortfolioScreenVariant"
        clientLoadPlaceholder={true}
      />
    </div>

    <!-- Under-hero portfolio showcase -->
    <!-- <PortfolioShowcaseSection /> -->

    <!-- </GradientLayout> -->

        <DoubleCard />

    <ContentRenderer
      query={roots("capabilities").orderBy(sortByOrder()).limit(6)}
      variant="CardVariant"
      id="website-services"
      title="Website Services"
      heading={{
        before: "Websites aren't just something we do.",
        text: "They're our specialty.",
      }}
      description="You deserve a lightning-fast, secure, and scalable website that turn your visitors into customers. Every site we build is built to dominate and stand the test of time."
      columns={3}
      gap="lg"
      showButtonSection={false}
      className="pt-35 lg:pt-20"
    />

    <!-- Filtered Capabilities by Parent (auto-detects parent field) -->
    <!-- <ContentRenderer
      query={query("capabilities").where((entry) => !!entry.data.parent).orderBy(sortByOrder())}
      variant="FilteredCardVariant"
      id="capabilities-filtered"
      title="Our Capabilities"
      heading={{
        before: "Explore our",
        text: "specialized skills",
        after: "by category.",
      }}
      description="Filter through our expertise areas to find exactly what you need for your project."
      filter={{ showAll: false, showCount: true }}
      columns={3}
      filterSize="sm"
    /> -->

    <!-- Website Benefits -->
    <ContentRenderer
      query={byTag("benefits", "featured").orderBy(sortByOrder())}
      variant="BenefitsVariant"
      columns={2}
      gap="lg"
      title="Why Choose Us"
      heading="What Makes Our Websites Different",
    />

    <!-- About Us Two-Column Section -->
    <!-- <ContentRenderer
      query={query("about-us").orderBy(sortByOrder())}
      variant="TwoColumnImageVariant"
      imagePosition="right"
      imagePlaceholder="ðŸ‘¨â€ðŸ’»"
      imageAlt="Griffin Surett - Founder"
      contentType="text"
      borderClass=""
      ctaText="Learn More About Us"
    >
    <Video
      src="/speed-site.mov"
      alt="Speed site walkthrough"
      controls
      clientLoadPlaceholder={true}
      wrapperClass="video-shell"
    />
    </ContentRenderer> -->

    <!-- <ContentRenderer query={query("projects")} variant="PortfolioVariant" /> -->
    <ContentRenderer
      query={query("solutions")}
      variant="IconListVariant"
      heading="Premium Websites for Any Business, Built for Your Growth.",
      title="Web Solutions"
      description="We design top-tier websites for businesses in every industry â€” from local services to global brands. Every site is custom-built for your goals, lightning-fast, secure, and easy to manage. No templates, no bloat â€” just a powerful online presence that looks sharp, performs flawlessly, and grows with you."
      autoAdvanceDelay={2000}
    />
    <!-- <ColorBorderLayout borderPosition="both"> -->
      <!-- <ContentRenderer
        query={query("solutions")}
        variant="VideoAccordionVariant"
        title="Website Solutions"
        heading="Premium Websites for Any Business, Built for Your Growth."
        description="Dive deeper into the speed, visuals, and UX of every solution with quick video overviews pulled straight from our library."
        className="pt-16"
        autoAdvanceDelay={3500}
      /> -->
    <!-- </ColorBorderLayout> -->

    <!-- Testimonials with rating filter -->
    <ContentRenderer
      query={query("testimonials").where((entry) => entry.data.rating >= 4)}
      variant="TestimonialCarouselVariant"
      id="testimonials-home"
    />

    <!-- Portfolio filtered by industries -->
    <ContentRenderer
      query={query('industries').orderBy(sortByOrder())}
      variant="FilteredPortfolioVariant"
      relatedCollection="projects"
      relatedField="industry"
      title="Portfolio"
      heading="Websites that deliver real results"
      description="From contractors to e-commerce brands, we build sites that look great, load fast, and convert visitors into customers."
      filter={{ showCount: false }}
      showFilters={true}
      showArrows={true}
    />


    <!-- Technologies -->
    <ContentRenderer
      query={byTag("technologies", "featured").orderBy(sortByOrder())}
      variant="TechnologiesVariant"
    />

    <!-- Filtered query - still gets meta from authors -->
    <!-- <ContentRenderer
      query={query("authors").where(whereArrayContains("tags", "featured"))}
      variant="CardVariant"
      columns={3}
      gap="lg"
    /> -->

    <!-- Addon Capabilities - auto-populates from capabilities meta -->
    <!-- <ContentRenderer
      query={query("capabilities").orderBy(sortByOrder())}
      variant="CardVariant"
      columns={3}
      gap="lg"
    /> -->

    <!-- FAQ ContentRenderer -->
    <ContentRenderer
      query={query("faq").orderBy(sortByOrder())}
      variant="AccordionVariant"
      allowMultiple={false}
      title="FAQs"
    />

    <!-- Blog - Most Recent Posts -->
    <ContentRenderer
      query={query("blog").orderBy(sortByDate("publishDate", "desc")).limit(4)}
      variant="BlogVariant"
      columns={2}
      title="Latest Articles"
      heading={{
        before: "Stay informed.",
        text: "Read our latest insights.",
      }}
    />

    <CTASection
      title="Get Started"
      heading={{
        before: "Ready to Transform Your Online Presence into a ",
        text: "High-Performance Growth Engine?",
      }}
      description="Join hundreds of successful businesses who trust Griffin's Web Services. While others juggle dozens of services, we've mastered one: building lightning-fast, secure, and scalable sites that turn visitors into customers."
    />

    <!-- Contact ContentRenderer -->
    <!-- <ContentRenderer
      query={query("contact-us")}
      variant="ContactVariant"
      columns={2}
    /> -->

    <!-- Blog with limit - auto-populates from blog meta -->
    <!-- <ContentRenderer
      query={query("blog").limit(2)}
      variant="BlogVariant"
      columns={2}
    /> -->

    <!-- Multi-collection query - requires manual title/description -->
    <!-- <ContentRenderer
      query={query(["blog", "projects"]).orderBy(sortByDate()).limit(10)}
      variant="ListVariant"
      title="Recent Updates"
      description="Latest from our blog and portfolio"
    /> -->
    </div>
</BaseLayout>
