import{r as c,j as i}from"./react-core.D5E039p9.js";const I=p=>p.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").slice(0,80),w="h2, h3";function G({id:p,className:y="",contentId:h,title:m="Table of Contents",headingSelector:g=w,scrollOffset:N=140,emptyLabel:E="Headings will appear here automatically."}){const b=p??`${h}-toc`,$=`${b}-list`,[a,C]=c.useState([]),[o,u]=c.useState(null),[k,x]=c.useState({}),v=c.useMemo(()=>g.split(",").map(t=>t.trim()).filter(Boolean).join(", ")||w,[g]);c.useEffect(()=>{const t=document.getElementById(h);if(!t)return;const e=Array.from(t.querySelectorAll(v)).map((r,s)=>{const d=r.textContent?.trim();if(!d)return null;const f=Number.parseInt(r.tagName.replace("H",""),10)||2;return r.id||(r.id=`${h}-${I(d)}-${s}`),r.dataset.tocAnchor=r.id,{id:r.id,text:d,level:f,element:r}}).filter(Boolean),n=[];if(e.forEach(r=>{r.level<=2||n.length===0?n.push({parent:r,children:[]}):n[n.length-1].children.push(r)}),C(n),e.length>0&&u(r=>r??e[0].id),e.length===0)return;const l=new IntersectionObserver(r=>{r.forEach(s=>{s.isIntersecting&&u(s.target.id)})},{rootMargin:"-45% 0px -45% 0px",threshold:.15});return e.forEach(({element:r})=>l.observe(r)),()=>{l.disconnect()}},[h,v]),c.useEffect(()=>{a.length!==0&&x(()=>{const t={};return a.forEach((e,n)=>{t[e.parent.id]=n===0}),t})},[a]),c.useEffect(()=>{if(!o||a.length===0)return;const t=a.find(e=>e.parent.id===o||e.children.some(n=>n.id===o));t&&x(()=>{const e={};return a.forEach(n=>{e[n.parent.id]=n.parent.id===t.parent.id}),e})},[o,a]);const j=t=>{const e=document.getElementById(t);if(!e)return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),l=e.getBoundingClientRect().top+window.scrollY-N;window.scrollTo({top:l,behavior:n.matches?"auto":"smooth"}),u(t),history.replaceState(null,"",`#${t}`)},A=(t,e)=>{t.preventDefault(),x(()=>{const n={};return a.forEach(l=>{n[l.parent.id]=l.parent.id===e}),n}),j(e)},B=(t,e)=>{t.preventDefault(),j(e)};return i.jsxs("nav",{id:b,className:`card-bg border border-white/10 rounded-3xl p-6 shadow-2xl ${y}`.trim(),"aria-label":m,children:[i.jsx("div",{className:"flex items-center justify-center gap-4",children:i.jsx("p",{className:"text-[0.7rem] uppercase tracking-[0.3em] font-semibold dark:text-white/70 light:text-black/70",children:m})}),i.jsx("ol",{id:$,className:"mt-4 space-y-3 list-none p-0 m-0",children:a.length===0?i.jsx("li",{className:"py-3 text-sm text-muted",children:E}):a.map(t=>{const e=t.parent.id,n=!!k[e],l=o===e||t.children.some(s=>s.id===o),r=`${e}-children`;return i.jsxs("li",{className:"rounded-2xl list-none",children:[i.jsx("button",{type:"button",className:`w-full flex items-center justify-between gap-3 px-4 py-3 text-left text-sm md:text-base no-underline transition-colors duration-200 hover:text-primary focus-visible:text-heading ${l?"text-accent font-semibold":"text-white/80"}`,"aria-expanded":n,"aria-controls":r,onClick:s=>A(s,e),children:i.jsx("span",{className:"flex-1 text-left leading-tight",children:t.parent.text})}),t.children.length>0&&i.jsx("ol",{id:r,className:`${n?"flex":"hidden"} flex-col gap-2 px-4 pb-3 pl-4 m-0 list-none`,"aria-hidden":!n,children:t.children.map(s=>{const d=s.id===o;return i.jsx("li",{className:"list-none",children:i.jsx("a",{href:`#${s.id}`,className:`flex items-start gap-3 text-sm no-underline transition-colors duration-200 hover:text-primary focus-visible:text-primary ${d?"text-heading font-semibold":"dark:text-white/70 light:text-black/70"}`,"aria-current":d,onClick:f=>B(f,s.id),children:i.jsx("span",{className:"flex-1 text-left leading-tight",children:s.text})})},s.id)})})]},e)})})]})}export{G as default};
