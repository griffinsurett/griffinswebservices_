import{r}from"./react-core.QUkC7_l_.js";import{c as z}from"./IntersectionObserver.CmZxnn85.js";function $(e){return e?.current?e.current:typeof window<"u"?window:null}function P(e){return e?e===window?typeof window<"u"&&window.scrollY||0:e.scrollTop||0:0}const H=({elementRef:e,scrollThreshold:o=10,debounceDelay:v=150,trustedOnly:g=!0,internalFlagRef:l,wheelSensitivity:L=1,onScrollActivity:M,onScrollUp:E,onScrollDown:d,onScrollStart:Y,onScrollEnd:w,onDirectionChange:h,onWheelActivity:T}={})=>{const a=r.useRef(null),x=r.useRef(0),f=r.useRef("none"),p=r.useRef(!1),c=r.useRef(null),n=r.useCallback(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),m=r.useCallback(()=>{n(),a.current=setTimeout(()=>{if(p.current){p.current=!1;const t=c.current;w?.({pos:P(t),dir:f.current})}},v)},[n,v,w]),b=r.useCallback((t,s)=>{if(Math.abs(t)<o)return;const u=c.current,i=P(u),y=t>0?"down":"up";p.current||(p.current=!0,Y?.({pos:i,dir:y,source:s})),y!==f.current&&f.current!=="none"&&h?.({from:f.current,to:y,pos:i,source:s}),f.current=y;const V={dir:y,delta:Math.abs(t),pos:i,source:s};M?.(V),y==="down"?d?.(V):E?.(V),m()},[M,d,Y,E,h,m,o]);return r.useEffect(()=>{const t=$(e);c.current=t,x.current=P(t)},[e]),r.useEffect(()=>{const t=c.current||$(e);if(!t)return;const s=u=>{if(g&&!u.isTrusted||l?.current)return;const i=(u.deltaY||0)*L;i!==0&&(T?.({deltaY:i,deltaX:u.deltaX||0,deltaZ:u.deltaZ||0,deltaMode:u.deltaMode,event:u}),b(i,"wheel"))};return t.addEventListener("wheel",s,{passive:!0}),()=>t.removeEventListener("wheel",s)},[e,b,l,T,g,L]),r.useEffect(()=>{const t=c.current||$(e);if(!t)return;const s=()=>{if(l?.current)return;const u=P(t),i=u-x.current;x.current=u,i!==0&&b(i,"scroll")};return t.addEventListener("scroll",s,{passive:!0}),()=>t.removeEventListener("scroll",s)},[e,b,l]),r.useEffect(()=>()=>n(),[n]),{getCurrentPos:()=>P(c.current),getLastPos:()=>x.current,getLastDir:()=>f.current,isScrolling:()=>p.current}};function S(e){if(typeof e=="number")return`0px 0px ${e}px 0px`;const o=String(e??"").trim();return/^-?\d+px$/.test(o)?`0px 0px ${o} 0px`:o||"0px"}function C(e,{threshold:o=.1,root:v=null,rootMargin:g="0px",once:l=!1,onEnter:L,onExit:M,onForward:E,onBackward:d,pauseDelay:Y=100,restoreAtTopOffset:w=100,menuCheckboxId:h}={}){const[T,a]=r.useState(!1),[x,f]=r.useState(!1),p=r.useMemo(()=>S(g),[g]);r.useEffect(()=>{const n=e?.current;if(!n)return;const{isVisible:m,hasBeenSeen:b,disconnect:t}=z(n,{threshold:o,root:v,rootMargin:p,once:l,onEnter:s=>{a(!0),f(!0),L?.(s)},onExit:s=>{a(!1),M?.(s)}});return a(m),f(b),t},[e,o,v,p,l,L,M]);const c=typeof E=="function"||typeof d=="function";return H({elementRef:null,scrollThreshold:5,debounceDelay:Y,onScrollActivity:c?({dir:n})=>{n==="down"?E?.():typeof window<"u"&&window.pageYOffset<=w&&d?.()}:void 0}),r.useEffect(()=>{if(!h||!c||typeof document>"u")return;const n=document.getElementById(h);if(!n)return;const m=()=>{n.checked?d?.():typeof window<"u"&&window.pageYOffset>w?E?.():d?.()};return n.addEventListener("change",m),m(),()=>n.removeEventListener("change",m)},[h,d,E,w,c]),l?x:T}export{H as a,$ as r,C as u};
