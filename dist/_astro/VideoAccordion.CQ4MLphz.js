import{j as e,r as a}from"./react-core.EkFKhCmS.js";import{A as T}from"./AnimatedBorder.B2k6XdV4.js";import{I as D}from"./Icon.BBeJOJPq.js";import{u as z}from"./useViewAnimation.CoM8gNl1.js";import{u as U}from"./useEngagementAutoplay.DpKITCWd.js";import"./useVisibility.CSoA3ZaV.js";function L({icon:s,title:u,description:l,isActive:n,progress:r=0,onToggle:c,children:d,className:x=""}){return e.jsx("div",{className:`group relative ${x}`.trim(),"data-accordion-item":!0,"data-active":n?"true":"false",children:e.jsxs(T,{variant:"progress",triggers:"controlled",active:n,controller:r,duration:300,borderRadius:"rounded-3xl",borderWidth:2,className:"transition-all duration-200",innerClassName:"card-bg",children:[e.jsxs("button",{type:"button",className:"w-full text-left flex items-center justify-between p-5 hover:bg-card/50 transition-colors duration-300 cursor-pointer relative z-20",onClick:c,onMouseDown:i=>i.preventDefault(),"aria-expanded":n,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s&&e.jsx("span",{className:"icon-large card-icon-color shrink-0",children:s.includes(":")?e.jsx(D,{icon:s,size:"lg",className:"w-6 h-6"}):e.jsx("span",{className:"text-2xl leading-none",children:s})}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"h4",children:u})})]}),e.jsx("div",{className:`
              w-8 h-8 rounded-full flex items-center justify-center
              transition-all duration-[600ms] text-xl font-semibold
              ${n?"bg-primary text-bg":"bg-primary/15 text-accent group-hover:bg-primary/25"}
            `,"aria-hidden":"true",children:e.jsx("span",{className:"translate-y-[-1px]",children:n?"âˆ’":"+"})})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out relative z-20 ${n?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("div",{className:"w-full h-px bg-primary/15 mb-4"}),l&&e.jsx("p",{className:"text-text/80 leading-relaxed mb-4",children:l}),d]})})]})})}const P=a.forwardRef(function({desktop:u=!1,className:l="",wrapperClassName:n="",overlay:r,autoPlay:c,muted:d,playsInline:x,controls:i,preload:o,...p},v){const f=u?"w-full h-[24rem] object-cover rounded-2xl":"w-full aspect-video object-cover rounded-2xl",h=c??!0,y=d??!0,m=x??!0,b=i??u,N=o??"metadata";return e.jsxs("div",{className:`relative rounded-2xl overflow-hidden bg-card/40 ${n}`.trim(),children:[e.jsx("video",{ref:v,className:`${f} ${l}`.trim(),autoPlay:h,muted:y,playsInline:m,controls:b,preload:N,...p}),r]})}),O=s=>s.replace(/[:]/g,"");function Q({items:s,className:u="",autoAdvanceDelay:l=3e3}){const r=Array.isArray(s)?s.filter(t=>!!t&&typeof t=="object"&&!!t.title):[],c=a.useRef(null),d=a.useRef(null),[x,i]=a.useState(0),[o,p]=a.useState(0),v=a.useId(),f=a.useMemo(()=>O(v),[v]),h=z({duration:500,delay:0,threshold:0,rootMargin:"0px 0px -20% 0px"}),y=a.useMemo(()=>()=>{const t=c.current||d.current;return!t||!Number.isFinite(t.duration)?l:Math.max(0,(t.duration-t.currentTime)*1e3)+l},[l]),{engageUser:m,beginGraceWindow:b,isAutoplayPaused:N,isResumeScheduled:W,userEngaged:B,schedule:w}=U({totalItems:r.length,currentIndex:o,setIndex:t=>p(t),autoplayTime:y,resumeDelay:5e3,containerSelector:`[data-video-accordion="${f}"]`,itemSelector:`[data-video-accordion="${f}"] [data-accordion-item]`,inView:h.inView,engageOnlyOnActiveItem:!0,activeItemAttr:"data-active"}),j=a.useRef(null);a.useEffect(()=>{j.current=w},[w]),a.useEffect(()=>{r.length!==0&&o>=r.length&&p(0)},[o,r.length]);const S=a.useCallback(t=>{p(t),i(0),m(),j.current?.()},[m]),k=a.useCallback(()=>{const t=c.current||d.current;!t||!t.duration||(i(t.currentTime/t.duration*100),j.current?.())},[]),I=a.useCallback(()=>{i(0),j.current?.()},[]),C=a.useCallback(()=>{i(100),b()},[b]),$=a.useCallback(()=>{m()},[m]),{style:A,...V}=h.props;if(r.length===0)return null;const E=r[Math.min(o,r.length-1)];return e.jsx("div",{ref:h.ref,className:`animated-element fade-in ${u}`.trim(),"data-video-accordion":f,...V,style:A,children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-12 max-2-primary",children:[e.jsx("div",{className:"min-w-0 lg:basis-[clamp(420px,40vw,560px)] lg:flex-shrink-0 flex flex-col space-y-4","data-accordion-container":!0,children:r.map((t,g)=>{const R=t.key||t.title||`item-${g}`;return e.jsx(L,{icon:t.icon,title:t.title,description:t.description,isActive:o===g,progress:x,onToggle:()=>S(g),children:o===g&&e.jsx("div",{className:"lg:hidden mt-4",children:e.jsx(P,{ref:M=>{d.current=M},src:t.videoSrc,onTimeUpdate:k,onEnded:C,onLoadedData:I,onClick:$,desktop:!1},`mobile-${R}`)})},R)})}),e.jsx("div",{className:"hidden lg:block lg:flex-1 min-w-0",children:e.jsxs("div",{className:"sticky top-0",children:[e.jsx(P,{ref:c,src:E?.videoSrc,onTimeUpdate:k,onEnded:C,onLoadedData:I,onClick:$,desktop:!0,wrapperClassName:"shadow-2xl shadow-accent/15 bg-card/40"},`desktop-${E?.key??o}`),!1]})})]})})}export{Q as default};
