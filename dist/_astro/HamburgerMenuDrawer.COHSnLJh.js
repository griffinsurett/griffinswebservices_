import{j as t,r as f}from"./react-core.Bu3pfRuf.js";import{M as L}from"./Modal.CM9e5zU_.js";import{B as w}from"./accordion.ww4Nu6BT.js";import{I as S}from"./ui-primitives.CaMQuQ92.js";import"./visibility-hooks.CfYPHZvz.js";import"./engagement-hooks.BA0lCfsU.js";const v="__GREASTRO_CLIENT_CLICK_HANDLERS__",M="greastro-custom-hydrations",_=()=>{const e=globalThis;return e[v]||(e[v]=new Map),e[v]},I=()=>{const e=globalThis;return e.__GREASTRO_CLIENT_CLICK_PENDING__||(e.__GREASTRO_CLIENT_CLICK_PENDING__=new Map),e.__GREASTRO_CLIENT_CLICK_PENDING__},R=(e,o)=>{const r=I(),s=r.get(e);if(s?.length){r.delete(e);for(const l of s)try{l(o)}catch{}}},T=e=>{typeof window>"u"||window.dispatchEvent(new CustomEvent(M,{detail:{key:e}}))},$=(e,o)=>{const r=()=>{const c=_().get(e);!c||c!==o||(R(e,o.handler),T(e))},s=typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window:null;if(s){s.requestAnimationFrame(()=>{s.requestAnimationFrame(()=>{r()})});return}if(typeof setTimeout=="function"){setTimeout(r,0);return}r()},A=(e,o)=>{if(!e)return;const r=_(),s={handler:o};r.set(e,s),$(e,s)},B=(e,o)=>{if(!e)return;const r=_(),s=r.get(e);!s||s.handler!==o||r.delete(e)};function O({title:e,url:o,children:r=[],openInNewTab:s=!1,onNavigate:l,onOpenSubmenu:c}){const i=r.length>0,u=()=>{i&&c?.({title:e,items:r})},g=()=>{if(o){l();return}u()};return i?t.jsx("li",{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(w,{variant:"menuItemButton",className:"hover-emphasis-text inline-flex items-center gap-2 text-left",onClick:g,...o?{href:o,target:s?"_blank":void 0,rel:s?"noopener noreferrer":void 0}:{type:"button"},children:e}),t.jsx("button",{type:"button",onClick:u,"aria-label":`View submenu for ${e}`,className:"text-text",children:t.jsx(S,{icon:"lu:chevron-right",size:"md",className:"w-6 h-6"})})]})}):t.jsx("li",{children:t.jsx(w,{variant:"menuItemButton",href:o||"#",onClick:l,target:s?"_blank":void 0,rel:s?"noopener noreferrer":void 0,className:"hover-emphasis-text",children:e})})}function G({isOpen:e,onChange:o,className:r="",ariaLabel:s="Toggle menu",hamburgerTransform:l=!0,...c}){const i=l&&e;return t.jsxs("button",{type:"button","aria-label":s,"aria-expanded":e,onClick:()=>o(!e),className:`group relative h-6 w-7 cursor-pointer flex flex-col justify-between items-start text-text hover:text-heading ${r}`.trim(),...c,children:[t.jsx("span",{className:`block h-[0.5px] w-full bg-current transition-all duration-300 ${i?"absolute top-1/2 -translate-y-1/2 rotate-45":""}`}),t.jsx("span",{className:`block h-[0.5px] bg-current transition-all duration-300 ${i?"opacity-0 w-full":"opacity-100 w-5 group-hover:w-full"}`}),t.jsx("span",{className:`block h-[0.5px] w-full bg-current transition-all duration-300 ${i?"absolute top-1/2 -translate-y-1/2 -rotate-45":""}`})]})}function V({items:e,className:o="",hamburgerTransform:r=!0,closeButton:s=!1,triggerId:l="mobile-menu-toggle",useExternalTrigger:c=!1,clientClickHandlerKey:i}){const[u,g]=f.useState(!1),[h,b]=f.useState(()=>[{title:"Main Menu",items:e}]),C=f.useRef(l);C.current=l;const p=f.useCallback(()=>{b([{title:"Main Menu",items:e}])},[e]);f.useEffect(()=>{p()},[p]);const x=f.useCallback(n=>{const a=document.getElementById(C.current);a&&a.setAttribute("aria-expanded",String(n))},[]),m=f.useCallback(n=>{g(a=>{const d=typeof n=="boolean"?n:!a;return d||p(),x(d),d})},[p,x]);f.useEffect(()=>{x(u)},[u,x]),f.useEffect(()=>{if(!c)return;const n=document.getElementById(l);if(!n)return;const a=()=>m();return n.addEventListener("click",a),()=>n.removeEventListener("click",a)},[l,m,c]),f.useEffect(()=>{if(!i)return;const n=()=>(m(),!0);return A(i,n),()=>{B(i,n)}},[i,m]);const j=()=>{m(!1)},E=(n,a)=>{a?.length&&b(d=>[...d,{title:n,items:a}])},y=()=>{b(n=>n.length>1?n.slice(0,-1):n)},k=(h.length-1)*100;return t.jsxs(t.Fragment,{children:[!c&&t.jsx(G,{isOpen:u,onChange:n=>m(n),hamburgerTransform:r,ariaLabel:u?"Close menu":"Open menu",id:l}),t.jsx(L,{isOpen:u,onClose:()=>m(!1),position:"center",className:`w-full max-w-full h-full bg-gradient p-0 rounded-none transform transition-transform duration-300 ease-out ${u?"translate-y-0":"translate-y-full"}`,overlayClass:`bg-black/50 transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`,closeButton:s,ariaLabel:"Mobile navigation menu",ssr:!1,children:t.jsx("nav",{className:`${o} h-full w-full flex flex-col justify-center overflow-hidden`,"aria-label":"Mobile navigation",children:t.jsx("div",{className:"inner-section my-auto py-4",style:{maxHeight:"calc(100vh - 6rem)"},children:t.jsx("div",{className:"relative w-full h-full overflow-hidden",children:t.jsx("div",{className:"flex h-full transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${k}%)`},children:h.map((n,a)=>t.jsxs("div",{className:"w-full flex-shrink-0 h-full flex flex-col relative","aria-hidden":a!==h.length-1,children:[a>0&&t.jsxs("button",{type:"button",onClick:y,className:"flex items-center gap-2 text-text hover:underline absolute left-0 top-0","aria-label":`Go back to ${h[a-1]?.title??"previous menu"}`,children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),t.jsx("div",{className:`flex-1 overflow-y-auto overflow-x-hidden pr-2 ${a>0?"pt-12":""}`,children:t.jsx("ul",{className:"menu-item-spacing pb-10",children:n.items.map(d=>t.jsx(O,{...d,onNavigate:j,onOpenSubmenu:N=>E(N.title,N.items)},d.slug||d.id))})})]},`${n.title}-${a}`))})})})})})]})}export{V as default};
