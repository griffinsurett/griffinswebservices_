import{r as n}from"./react-core.INjS0cla.js";function S(e){return e?.current?e.current:typeof window<"u"?window:null}function Y(e){return e?e===window?typeof window<"u"&&window.scrollY||0:e.scrollTop||0:0}const T=({elementRef:e,scrollThreshold:i=10,debounceDelay:h=150,trustedOnly:x=!0,internalFlagRef:l,wheelSensitivity:y=1,onScrollActivity:g,onScrollUp:c,onScrollDown:s,onScrollStart:p,onScrollEnd:w,onDirectionChange:o,onWheelActivity:L}={})=>{const E=n.useRef(null),M=n.useRef(0),b=n.useRef("none"),m=n.useRef(!1),d=n.useRef(null),r=n.useCallback(()=>{E.current&&(clearTimeout(E.current),E.current=null)},[]),v=n.useCallback(()=>{r(),E.current=setTimeout(()=>{if(m.current){m.current=!1;const t=d.current;w?.({pos:Y(t),dir:b.current})}},h)},[r,h,w]),V=n.useCallback((t,u)=>{if(Math.abs(t)<i)return;const f=d.current,a=Y(f),P=t>0?"down":"up";m.current||(m.current=!0,p?.({pos:a,dir:P,source:u})),P!==b.current&&b.current!=="none"&&o?.({from:b.current,to:P,pos:a,source:u}),b.current=P;const I={dir:P,delta:Math.abs(t),pos:a,source:u};g?.(I),P==="down"?s?.(I):c?.(I),v()},[g,s,p,c,o,v,i]);return n.useEffect(()=>{const t=S(e);d.current=t,M.current=Y(t)},[e]),n.useEffect(()=>{const t=d.current||S(e);if(!t)return;const u=f=>{if(x&&!f.isTrusted||l?.current)return;const a=(f.deltaY||0)*y;a!==0&&(L?.({deltaY:a,deltaX:f.deltaX||0,deltaZ:f.deltaZ||0,deltaMode:f.deltaMode,event:f}),V(a,"wheel"))};return t.addEventListener("wheel",u,{passive:!0}),()=>t.removeEventListener("wheel",u)},[e,V,l,L,x,y]),n.useEffect(()=>{const t=d.current||S(e);if(!t)return;const u=()=>{if(l?.current)return;const f=Y(t),a=f-M.current;M.current=f,a!==0&&V(a,"scroll")};return t.addEventListener("scroll",u,{passive:!0}),()=>t.removeEventListener("scroll",u)},[e,V,l]),n.useEffect(()=>()=>r(),[r]),{getCurrentPos:()=>Y(d.current),getLastPos:()=>M.current,getLastDir:()=>b.current,isScrolling:()=>m.current}};function $(e,{threshold:i=.1,root:h=null,rootMargin:x="0px",once:l=!1,onEnter:y,onExit:g}={}){let c=!1,s=!1,p=null;return!e||typeof IntersectionObserver>"u"?{isVisible:c,hasBeenSeen:s,disconnect:()=>{}}:(p=new IntersectionObserver(w=>{const o=w[0];if(!o)return;const L=o.isIntersecting;c=L,L?(s||(s=!0),y?.(o),l&&p?.disconnect()):g?.(o)},{threshold:i,root:h,rootMargin:x}),p.observe(e),{get isVisible(){return c},get hasBeenSeen(){return s},disconnect:()=>p?.disconnect()})}function z(e){if(typeof e=="number")return`0px 0px ${e}px 0px`;const i=String(e??"").trim();return/^-?\d+px$/.test(i)?`0px 0px ${i} 0px`:i||"0px"}function O(e,{threshold:i=.1,root:h=null,rootMargin:x="0px",once:l=!1,onEnter:y,onExit:g,onForward:c,onBackward:s,pauseDelay:p=100,restoreAtTopOffset:w=100,menuCheckboxId:o}={}){const[L,E]=n.useState(!1),[M,b]=n.useState(!1),m=n.useMemo(()=>z(x),[x]);n.useEffect(()=>{const r=e?.current;if(!r)return;const{isVisible:v,hasBeenSeen:V,disconnect:t}=$(r,{threshold:i,root:h,rootMargin:m,once:l,onEnter:u=>{E(!0),b(!0),y?.(u)},onExit:u=>{E(!1),g?.(u)}});return E(v),b(V),t},[e,i,h,m,l,y,g]);const d=typeof c=="function"||typeof s=="function";return T({elementRef:null,scrollThreshold:5,debounceDelay:p,onScrollActivity:d?({dir:r})=>{r==="down"?c?.():typeof window<"u"&&window.pageYOffset<=w&&s?.()}:void 0}),n.useEffect(()=>{if(!o||!d||typeof document>"u")return;const r=document.getElementById(o);if(!r)return;const v=()=>{r.checked?s?.():typeof window<"u"&&window.pageYOffset>w?c?.():s?.()};return r.addEventListener("change",v),v(),()=>r.removeEventListener("change",v)},[o,s,c,w,d]),l?M:L}export{T as a,$ as c,S as r,O as u};
