import{a as r,c as d,s as m}from"./consent.Drqa4rP7.js";function u(e){if(typeof localStorage>"u")return null;try{return localStorage.getItem(e)}catch(n){return console.error(`Error reading localStorage key ${e}:`,n),null}}function p(e,n){if(!(typeof localStorage>"u"))try{localStorage.setItem(e,n)}catch(a){console.error(`Error setting localStorage key ${e}:`,a)}}const i="user-language",f="google-translate-sdk",t={scriptRequested:!1,translateInitialized:!1,pendingLanguage:null};function l(e){return e||"en"}function c(e){if(p(i,e),!r("functional")){e==="en"&&d("googtrans");return}e==="en"?d("googtrans"):m("googtrans",`/en/${e}`,{expires:365,sameSite:"Lax"})}function g(){if(t.scriptRequested||t.translateInitialized)return;if(!r("functional")){console.warn("Functional consent required to load Google Translate");return}if(document.getElementById(f)){t.scriptRequested=!0;return}t.scriptRequested=!0;const n=document.createElement("script");n.id=f,n.src="https://translate.google.com/translate_a/element.js?cb=initializeGoogleTranslate",n.async=!0,n.onerror=()=>{t.scriptRequested=!1,console.error("Failed to load Google Translate script")},document.head.appendChild(n)}function o(e){const n=document.querySelector("select.goog-te-combo");if(!(n instanceof HTMLSelectElement))return!1;const a=e==="en"?"":e;return n.value===a?(t.pendingLanguage=null,!0):(n.value=a,n.dispatchEvent(new Event("change")),a?document.documentElement.dataset.preferredLanguage=e:document.documentElement.removeAttribute("data-preferred-language"),t.pendingLanguage=null,!0)}window.initializeGoogleTranslate=function(){const e=window.google;if(!e?.translate?.TranslateElement){t.scriptRequested=!1;return}new e.translate.TranslateElement({pageLanguage:"en",includedLanguages:"",autoDisplay:!1},"google_translate_element"),t.translateInitialized=!0;const n=t.pendingLanguage||l(u(i));n&&n!=="en"&&requestAnimationFrame(()=>o(n))};window.changeLanguage=function(e){const n=l(e);if(c(n),n==="en"){document.documentElement.removeAttribute("data-preferred-language"),t.translateInitialized?o("en"):t.pendingLanguage=null;return}if(t.pendingLanguage=n,!r("functional")){console.warn("Functional consent required to change languages");return}g(),t.translateInitialized&&o(n)};const s=l(u(i));s!=="en"&&r("functional")&&(c(s),t.pendingLanguage=s,g());window.addEventListener("consent-changed",()=>{if(!r("functional"))return;const e=l(u(i));e!=="en"&&(c(e),t.pendingLanguage=e,t.translateInitialized?o(e):g())});
