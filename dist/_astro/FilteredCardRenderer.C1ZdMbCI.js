import{r as f,j as d}from"./react-core.D5E039p9.js";import{F as x}from"./carousels.DTh5GBtM.js";import j from"./CardRenderer.C0_tp63K.js";import"./accordion.Bbi0RoQs.js";import"./ui-primitives.3avK0gLh.js";import"./visibility-hooks.JsR5xPa4.js";import"./engagement-hooks.CM_iKjxM.js";import"./FeatureCard.D8PClntL.js";const F="__all__";function v(n){if(n.length===0)return null;const t=n.slice(0,5);if(t.some(r=>r.parent!==void 0&&r.parent!==null))return"parent";if(t.some(r=>Array.isArray(r.tags)&&r.tags.length>0))return"tags";if(t.some(r=>r.category!==void 0&&r.category!==null))return"category";for(const r of t)for(const[l,e]of Object.entries(r))if(!["slug","url","title","description","icon","image","order","Content","content"].includes(l)&&e&&typeof e=="object"){if("id"in e||"slug"in e||"collection"in e)return l;if(Array.isArray(e)&&e.length>0&&typeof e[0]=="object"){const i=e[0];if("id"in i||"slug"in i||"collection"in i)return l}}return null}function m(n){return n==null?null:typeof n=="string"?n:typeof n=="object"?n.id||n.slug||null:String(n)}function A(n){return n.replace(/-/g," ").replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())}function w(n,t){const r=new Map;for(const l of n){const e=l[t];if(e!=null)if(Array.isArray(e))for(const i of e){const o=m(i);if(!o)continue;const a=r.get(o);if(a)a.count++;else{const c=typeof i=="object"&&(i.title||i.label||i.name)||o,s=typeof i=="object"?i.icon:void 0;r.set(o,{label:A(c),icon:s,count:1})}}else{const i=m(e);if(!i)continue;const o=r.get(i);if(o)o.count++;else{let a=i,c;if(typeof e=="object")a=e.title||e.label||e.name||i,c=e.icon;else{const s=l[`${t}Data`];s&&(a=s.title||s.label||i,c=s.icon)}r.set(i,{label:A(a),icon:c,count:1})}}}return Array.from(r.entries()).map(([l,e])=>({key:l,label:e.label,icon:e.icon,count:e.count}))}function C(n,t,r){return t===F?n:n.filter(l=>{const e=l[r];return e==null?!1:Array.isArray(e)?e.some(i=>m(i)===t):m(e)===t})}function I(n,t){const r=Array.isArray(n)?n:[],l=f.useMemo(()=>t?.field?t.field:v(r),[r,t?.field]),e=f.useMemo(()=>{if(!l)return[];const u=w(r,l);return t?.showAll!==!1?[{key:F,label:t?.allLabel??"All",icon:t?.allIcon,count:r.length},...u]:u},[r,l,t?.showAll,t?.allLabel,t?.allIcon]),i=f.useMemo(()=>t?.defaultFilter&&e.some(p=>p.key===t.defaultFilter)?t.defaultFilter:e[0]?.key??F,[t?.defaultFilter,e]),[o,a]=f.useState(i),c=f.useMemo(()=>l?C(r,o,l):r,[r,o,l]),s=f.useCallback(u=>{a(u)},[]),y=!!(l&&e.length>1);return{filteredItems:c,filterOptions:e,activeFilter:o,setActiveFilter:s,showFilters:y,groupingField:l,showCount:t?.showCount??!1}}function S({items:n=[],filter:t,filterSize:r="sm",filterClassName:l="",onFilterChange:e,...i}){const o=Array.isArray(n)?n:[],{filteredItems:a,filterOptions:c,activeFilter:s,setActiveFilter:y,showFilters:u,groupingField:p,showCount:g}=I(o,t),h=b=>{y(b),e?.(b)};return o.length===0?null:d.jsxs("div",{className:"filtered-card-renderer",children:[d.jsx(x,{options:c,activeFilter:s,onFilterChange:h,show:u,groupingField:p,size:r,showCount:g,className:l}),d.jsx("div",{className:"transition-all duration-300 ease-in-out",children:d.jsx(j,{items:a,...i})},s)]})}export{S as default};
