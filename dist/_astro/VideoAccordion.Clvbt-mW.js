import{j as t,r as a}from"./react-core.KjzrvO5l.js";import{A as z}from"./AnimatedBorder.ZYPcZ3hl.js";import U from"./Icon.DpHysAms.js";import S from"./Button.DQGOyHNy.js";import{u as L}from"./useViewAnimation.upjQ5u9Y.js";import{u as B}from"./useEngagementAutoplay.CXcwjRcL.js";import"./useVisibility.B645O2tJ.js";function O({icon:l,title:f,description:c,isActive:o,progress:n=0,onToggle:u,children:m,className:x=""}){return t.jsx("div",{className:`group relative ${x}`.trim(),"data-accordion-item":!0,"data-active":o?"true":"false",children:t.jsxs(z,{variant:"progress",triggers:"controlled",active:o,controller:n,duration:300,borderRadius:"rounded-3xl",borderWidth:2,className:"transition-all duration-200",innerClassName:"card-bg",children:[t.jsxs(S,{variant:"link",type:"button",className:"w-full text-left flex items-center justify-between p-5 hover:bg-card/50 transition-colors duration-300 cursor-pointer relative z-20",onClick:u,onMouseDown:d=>d.preventDefault(),"aria-expanded":o,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[l&&t.jsx("span",{className:"icon-large card-icon-color shrink-0",children:l.includes(":")?t.jsx(U,{icon:l,size:"lg",className:"w-6 h-6"}):t.jsx("span",{className:"text-2xl leading-none",children:l})}),t.jsx("div",{className:"text-left",children:t.jsx("p",{className:"h4",children:f})})]}),t.jsx("div",{className:`
              w-8 h-8 rounded-full flex items-center justify-center
              transition-all duration-[600ms] text-xl font-semibold
              ${o?"bg-primary text-bg":"bg-primary/15 text-accent group-hover:bg-primary/25"}
            `,"aria-hidden":"true",children:t.jsx("span",{className:"translate-y-[-1px]",children:o?"âˆ’":"+"})})]}),t.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out relative z-20 ${o?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsxs("div",{className:"px-6 pb-6",children:[t.jsx("div",{className:"w-full h-px bg-primary/15 mb-4"}),c&&t.jsx("p",{className:"text-text/80 leading-relaxed mb-4",children:c}),m]})})]})})}const A=a.forwardRef(function({desktop:f=!1,className:c="",wrapperClassName:o="",overlay:n,autoPlay:u,muted:m,playsInline:x,controls:d,preload:i,...h},b){const g=f?"w-full h-[24rem] object-cover rounded-2xl":"w-full aspect-video object-cover rounded-2xl",v=u??!0,w=m??!0,p=x??!0,j=d??f,N=i??"metadata";return t.jsxs("div",{className:`relative rounded-2xl overflow-hidden bg-card/40 ${o}`.trim(),children:[t.jsx("video",{ref:b,className:`${g} ${c}`.trim(),autoPlay:v,muted:w,playsInline:p,controls:j,preload:N,...h}),n]})}),W=l=>l.replace(/[:]/g,"");function Z({items:l,className:f="",autoAdvanceDelay:c=3e3}){const n=Array.isArray(l)?l.filter(e=>!!e&&typeof e=="object"&&!!e.title):[],u=a.useRef(null),m=a.useRef(null),[x,d]=a.useState(0),[i,h]=a.useState(0),b=a.useId(),g=a.useMemo(()=>W(b),[b]),v=L({duration:500,delay:0,threshold:0,rootMargin:"0px 0px -20% 0px"}),w=a.useCallback(()=>{const e=u.current,r=m.current;let s=null;return e&&!e.paused&&e.currentTime>0?s=e:r&&!r.paused&&r.currentTime>0?s=r:e&&e.offsetParent!==null?s=e:r&&r.offsetParent!==null?s=r:s=e||r,!s||!Number.isFinite(s.duration)?c:Math.max(0,(s.duration-s.currentTime)*1e3)+c},[c]),{engageUser:p,beginGraceWindow:j,isAutoplayPaused:N,isResumeScheduled:F,userEngaged:G,schedule:k}=B({totalItems:n.length,currentIndex:i,setIndex:e=>h(e),autoplayTime:w,resumeDelay:5e3,containerSelector:`[data-video-accordion="${g}"]`,itemSelector:`[data-video-accordion="${g}"] [data-accordion-item]`,inView:v.inView,engageOnlyOnActiveItem:!0,activeItemAttr:"data-active"}),y=a.useRef(null);a.useEffect(()=>{y.current=k},[k]),a.useEffect(()=>{n.length!==0&&i>=n.length&&h(0)},[i,n.length]);const V=a.useCallback(e=>{h(e),d(0),p(),y.current?.()},[p]),I=a.useCallback(()=>{const e=u.current,r=m.current;return e&&!e.paused&&e.currentTime>0?e:r&&!r.paused&&r.currentTime>0?r:e&&e.offsetParent!==null?e:r&&r.offsetParent!==null?r:e||r},[]),C=a.useCallback(()=>{const e=I();!e||!e.duration||(d(e.currentTime/e.duration*100),y.current?.())},[I]),P=a.useCallback(()=>{d(0),y.current?.()},[]),E=a.useCallback(()=>{d(100),j()},[j]),$=a.useCallback(()=>{p()},[p]),{style:D,...M}=v.props;if(n.length===0)return null;const T=n[Math.min(i,n.length-1)];return t.jsx("div",{ref:v.ref,className:`animated-element fade-in relative ${f}`.trim(),"data-video-accordion":g,...M,style:D,children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-12 max-2-primary",children:[t.jsx("div",{className:"min-w-0 lg:w-1/2 lg:shrink-0 flex flex-col space-y-4","data-accordion-container":!0,children:n.map((e,r)=>{const s=e.key||e.title||`item-${r}`;return t.jsxs(O,{icon:e.icon,title:e.title,description:e.description,isActive:i===r,progress:x,onToggle:()=>V(r),children:[i===r&&t.jsx("div",{className:"lg:hidden mt-4",children:t.jsx(A,{ref:R=>{m.current=R},src:e.videoSrc,onTimeUpdate:C,onEnded:E,onLoadedData:P,onClick:$,desktop:!1},`mobile-${s}`)}),e.hasPage&&e.url&&t.jsx("div",{className:"mt-4",children:t.jsxs(S,{variant:"link",href:e.url,rightIcon:"lu:arrow-right",children:["Explore ",e.title]})})]},s)})}),t.jsxs("div",{className:"hidden lg:block lg:w-1/2 min-w-0 lg:sticky lg:top-0",children:[t.jsx(A,{ref:u,src:T?.videoSrc,onTimeUpdate:C,onEnded:E,onLoadedData:P,onClick:$,desktop:!0,wrapperClassName:"shadow-2xl shadow-accent/15 bg-card/40"},`desktop-${T?.key??i}`),!1]})]})})}export{Z as default};
