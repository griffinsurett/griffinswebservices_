import{r as i}from"./react-core.EkFKhCmS.js";function D(u){return u?.current?u.current:typeof window<"u"?window:null}function C(u){return u?u===window?typeof window<"u"&&window.scrollY||0:u.scrollTop||0:0}const z=({elementRef:u,scrollThreshold:h=10,debounceDelay:b=150,trustedOnly:y=!0,internalFlagRef:l,wheelSensitivity:w=1,onScrollActivity:T,onScrollUp:d,onScrollDown:v,onScrollStart:a,onScrollEnd:g,onDirectionChange:t,onWheelActivity:X}={})=>{const E=i.useRef(null),f=i.useRef(0),c=i.useRef("none"),m=i.useRef(!1),Y=i.useRef(null),n=i.useCallback(()=>{E.current&&(clearTimeout(E.current),E.current=null)},[]),o=i.useCallback(()=>{n(),E.current=setTimeout(()=>{if(m.current){m.current=!1;const e=Y.current;g?.({pos:C(e),dir:c.current})}},b)},[n,b,g]),r=i.useCallback((e,s)=>{if(Math.abs(e)<h)return;const L=Y.current,p=C(L),x=e>0?"down":"up";m.current||(m.current=!0,a?.({pos:p,dir:x,source:s})),x!==c.current&&c.current!=="none"&&t?.({from:c.current,to:x,pos:p,source:s}),c.current=x;const P={dir:x,delta:Math.abs(e),pos:p,source:s};T?.(P),x==="down"?v?.(P):d?.(P),o()},[T,v,a,d,t,o,h]);return i.useEffect(()=>{const e=D(u);Y.current=e,f.current=C(e)},[u]),i.useEffect(()=>{const e=Y.current||D(u);if(!e)return;const s=L=>{if(y&&!L.isTrusted||l?.current)return;const p=(L.deltaY||0)*w;p!==0&&(X?.({deltaY:p,deltaX:L.deltaX||0,deltaZ:L.deltaZ||0,deltaMode:L.deltaMode,event:L}),r(p,"wheel"))};return e.addEventListener("wheel",s,{passive:!0}),()=>e.removeEventListener("wheel",s)},[u,r,l,X,y,w]),i.useEffect(()=>{const e=Y.current||D(u);if(!e)return;const s=()=>{if(l?.current)return;const L=C(e),p=L-f.current;f.current=L,p!==0&&r(p,"scroll")};return e.addEventListener("scroll",s,{passive:!0}),()=>e.removeEventListener("scroll",s)},[u,r,l]),i.useEffect(()=>()=>n(),[n]),{getCurrentPos:()=>C(Y.current),getLastPos:()=>f.current,getLastDir:()=>c.current,isScrolling:()=>m.current}},B=({onHoverStart:u=()=>{},onHoverEnd:h=()=>{},hoverDelay:b=0,unhoverIntent:y}={})=>{const l=i.useRef(null),w=!!y?.enabled,T=i.useRef(null),d=i.useRef(null),v=i.useRef({active:!1,elem:null,index:null,leftAt:0,rect:null,minDist:0,reentryGraceMs:0,lastPos:{x:NaN,y:NaN},lastDistance:1/0}),a=i.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),g=i.useCallback(()=>{d.current&&(d.current(),d.current=null),T.current&&(clearTimeout(T.current),T.current=null)},[]),t=i.useCallback(n=>{if(!w)return;const o=v.current;o.active&&(g(),o.active=!1,y?.onUnhoverCancel?.(o.elem,o.index,{reason:n}))},[w,g,y]),X=i.useCallback(()=>{if(!w)return;const n=v.current;if(!n.active)return;const o={timeAway:Date.now()-n.leftAt,distance:n.lastDistance};g(),n.active=!1,y?.onUnhoverCommit?.(n.elem,n.index,o)},[w,g,y]),E=(n,o)=>({left:n.left-o,top:n.top-o,right:n.right+o,bottom:n.bottom+o}),f=(n,o,r)=>{const e=n<r.left?r.left-n:n>r.right?n-r.right:0,s=o<r.top?r.top-o:o>r.bottom?o-r.bottom:0;return Math.hypot(e,s)},c=i.useCallback((n,o)=>{if(!w||typeof window>"u")return;t("restart");const{leaveDelay:r=120,reentryGraceMs:e=250,minOutDistance:s=8,boundaryPadding:L=6}=y??{},p=Number(r),x=Number(e),P=Number(s),V=Number(L),k=n?.getBoundingClientRect?.(),$=k?E(k,V):null,M=v.current;M.active=!0,M.elem=n??null,M.index=o??null,M.leftAt=Date.now(),M.rect=$,M.minDist=P,M.reentryGraceMs=x,M.lastDistance=1/0;const N=I=>{if(!M.active)return;const R=I.clientX,S=I.clientY;if(M.lastPos={x:R,y:S},M.rect){const G=f(R,S,M.rect);M.lastDistance=G,G===0&&Date.now()-M.leftAt<=M.reentryGraceMs&&t("reenter-geom")}};window.addEventListener("pointermove",N,{passive:!0}),d.current=()=>window.removeEventListener("pointermove",N);const A=()=>{if(!M.active)return;const I=Date.now()-M.leftAt,R=M.lastDistance;I>=p&&R>=M.minDist?X():T.current=setTimeout(A,Math.max(30,p/3))};T.current=setTimeout(A,p)},[t,X,w,y]),m=i.useCallback((n,o=null)=>{a(),t("enter"),b>0?l.current=setTimeout(()=>u(n,o),b):u(n,o)},[t,a,b,u]),Y=i.useCallback((n,o=null)=>{a(),b>0?l.current=setTimeout(()=>h(n,o),b):h(n,o),c(n,o)},[a,b,h,c]);return i.useEffect(()=>()=>{a(),g(),v.current.active=!1},[a,g]),{handleMouseEnter:m,handleMouseLeave:Y,cancelUnhoverIntent:()=>t("manual")}},j=({elementRef:u,pointerTypes:h=["mouse","touch","pen"],clickThreshold:b=10,longPressDelay:y=500,preventDefaultOnPointer:l=!1,onPointerDown:w=()=>{},onPointerUp:T=()=>{},onPointerMove:d=()=>{},onPointerCancel:v=()=>{},onPointerClick:a=()=>{},onPointerLongPress:g=()=>{}}={})=>{const t=i.useRef(new Map),X=i.useRef(new Map),E=i.useCallback(c=>{const m=X.current.get(c);m&&(clearTimeout(m),X.current.delete(c))},[]),f=i.useCallback(()=>{X.current.forEach(c=>clearTimeout(c)),X.current.clear()},[]);return i.useEffect(()=>{const c=D(u);if(!c)return;const m=r=>{if(!h.includes(r.pointerType))return;const e=r.pointerId,s={startX:r.clientX,startY:r.clientY,startTime:Date.now(),moved:!1,pointerType:r.pointerType};t.current.set(e,s),l&&r.preventDefault(),w(r,{pointerId:e,x:r.clientX,y:r.clientY,pointerType:r.pointerType,timestamp:s.startTime});const L=setTimeout(()=>{const p=t.current.get(e);p&&!p.moved&&g(r,{pointerId:e,x:p.startX,y:p.startY,pointerType:p.pointerType,duration:Date.now()-p.startTime})},y);X.current.set(e,L)},Y=r=>{if(!h.includes(r.pointerType))return;const e=r.pointerId,s=t.current.get(e);if(!s)return;const L=r.clientX-s.startX,p=r.clientY-s.startY,x=Math.hypot(L,p);!s.moved&&x>b&&(s.moved=!0,E(e)),l&&r.preventDefault(),d(r,{pointerId:e,x:r.clientX,y:r.clientY,pointerType:r.pointerType,deltaX:L,deltaY:p,distance:x,moved:s.moved})},n=r=>{if(!h.includes(r.pointerType))return;const e=r.pointerId,s=t.current.get(e);if(!s)return;const L=Date.now()-s.startTime;E(e),l&&r.preventDefault();const p={pointerId:e,x:r.clientX,y:r.clientY,pointerType:r.pointerType,duration:L,moved:s.moved};T(r,p),s.moved||a(r,p),t.current.delete(e)},o=r=>{if(!h.includes(r.pointerType))return;const e=r.pointerId;E(e),v(r,{pointerId:e,pointerType:r.pointerType}),t.current.delete(e)};return c.addEventListener("pointerdown",m,{passive:!l}),c.addEventListener("pointermove",Y,{passive:!l}),c.addEventListener("pointerup",n,{passive:!l}),c.addEventListener("pointercancel",o,{passive:!0}),()=>{c.removeEventListener("pointerdown",m),c.removeEventListener("pointermove",Y),c.removeEventListener("pointerup",n),c.removeEventListener("pointercancel",o),f()}},[u,h,b,y,l,w,d,T,v,a,g,E,f]),i.useEffect(()=>()=>f(),[f]),{getActivePointers:()=>Array.from(t.current.keys()),getPointerState:c=>t.current.get(c),clearAllTimers:f}},H=({elementRef:u,tapThreshold:h=10,longPressDelay:b=500,swipeThreshold:y=50,preventDefaultOnTouch:l=!1,onTouchStart:w=()=>{},onTouchEnd:T=()=>{},onTouchMove:d=()=>{},onTap:v=()=>{},onLongPress:a=()=>{},onSwipe:g=()=>{}}={})=>{const t=i.useRef({active:!1,startX:0,startY:0,startTime:0,moved:!1,longPressTriggered:!1}),X=i.useRef(null),E=i.useCallback(()=>{X.current&&(clearTimeout(X.current),X.current=null)},[]),f=i.useCallback(()=>{t.current={active:!1,startX:0,startY:0,startTime:0,moved:!1,longPressTriggered:!1},E()},[E]),c=i.useCallback((m,Y)=>{const n=m-t.current.startX,o=Y-t.current.startY,r=Math.hypot(n,o),e=Date.now()-t.current.startTime;let s=null;return Math.abs(n)>Math.abs(o)?s=n>0?"right":"left":s=o>0?"down":"up",{deltaX:n,deltaY:o,distance:r,duration:e,direction:s}},[]);return i.useEffect(()=>{const m=D(u);if(!m)return;const Y=e=>{const s=e.touches[0];s&&(t.current={active:!0,startX:s.clientX,startY:s.clientY,startTime:Date.now(),moved:!1,longPressTriggered:!1},l&&e.preventDefault(),w(e,{x:s.clientX,y:s.clientY,timestamp:t.current.startTime}),X.current=setTimeout(()=>{t.current.active&&!t.current.moved&&(t.current.longPressTriggered=!0,a(e,{x:t.current.startX,y:t.current.startY,duration:Date.now()-t.current.startTime}))},b))},n=e=>{const s=e.touches[0];if(!s||!t.current.active)return;const L=s.clientX-t.current.startX,p=s.clientY-t.current.startY,x=Math.hypot(L,p);!t.current.moved&&x>h&&(t.current.moved=!0,E()),l&&e.preventDefault(),d(e,{x:s.clientX,y:s.clientY,deltaX:L,deltaY:p,distance:x,moved:t.current.moved})},o=e=>{const s=e.changedTouches[0];if(!s)return;l&&e.preventDefault();const L=Date.now()-t.current.startTime,p={x:s.clientX,y:s.clientY,duration:L,moved:t.current.moved,longPressTriggered:t.current.longPressTriggered};if(T(e,p),!t.current.moved&&!t.current.longPressTriggered&&v(e,p),t.current.moved){const x=c(s.clientX,s.clientY);x.distance>=y&&g(e,{...p,...x})}f()},r=e=>{T(e,{x:t.current.startX,y:t.current.startY,duration:Date.now()-t.current.startTime,moved:t.current.moved,longPressTriggered:t.current.longPressTriggered}),f()};return m.addEventListener("touchstart",Y,{passive:!l}),m.addEventListener("touchmove",n,{passive:!l}),m.addEventListener("touchend",o,{passive:!l}),m.addEventListener("touchcancel",r,{passive:!0}),()=>{m.removeEventListener("touchstart",Y),m.removeEventListener("touchmove",n),m.removeEventListener("touchend",o),m.removeEventListener("touchcancel",r),E()}},[u,h,b,y,l,w,T,d,v,a,g,c,f,E]),i.useEffect(()=>()=>E(),[E]),{isTouchActive:()=>t.current.active,getTouchState:()=>({...t.current}),resetTouchState:f}},J=({containerSelector:u="[data-container]",itemSelector:h="[data-item]",onOutsideClick:b=()=>{},onInsideClick:y=()=>{},onItemClick:l=()=>{},trustedOnly:w=!0}={})=>(i.useEffect(()=>{const T=d=>{if(w&&!d.isTrusted)return;const v=d.target,a=v?.closest?.(u)??null,g=v?.closest?.(h)??null;if(!a){b(d);return}y(d,a),l(d,g,a)};return document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[u,h,y,b,l,w]),{triggerClick:T=>{document.querySelector(T)?.click?.()}}),K=({enabled:u=!0,leftElRef:h,rightElRef:b,onLeft:y=()=>{},onRight:l=()=>{},dragThreshold:w=40,tapThreshold:T=12}={})=>{const d=i.useRef({active:!1,zone:null,id:null,startX:0,startY:0,moved:!1,slid:!1}),v=i.useCallback((a,g)=>{if(!a||typeof window>"u")return()=>{};const t=f=>{u&&(d.current={active:!0,zone:g,id:f.pointerId,startX:f.clientX,startY:f.clientY,moved:!1,slid:!1},a.setPointerCapture?.(f.pointerId))},X=f=>{const c=d.current;if(!c.active||c.id!==f.pointerId||c.zone!==g)return;const m=f.clientX-c.startX,Y=f.clientY-c.startY;!c.moved&&(Math.abs(m)>2||Math.abs(Y)>2)&&(c.moved=!0),!(Math.abs(Y)>Math.abs(m))&&(f.preventDefault(),!c.slid&&Math.abs(m)>=w&&(g==="left"?y():l(),c.slid=!0))},E=f=>{const c=d.current;if(!c.active||c.id!==f.pointerId||c.zone!==g)return;const m=f.clientX-c.startX,Y=f.clientY-c.startY;!c.slid&&Math.hypot(m,Y)<=T&&(g==="left"?y():l());try{a.releasePointerCapture?.(f.pointerId)}catch{}d.current={active:!1,zone:null,id:null,startX:0,startY:0,moved:!1,slid:!1}};return a.addEventListener("pointerdown",t),a.addEventListener("pointermove",X),a.addEventListener("pointerup",E),a.addEventListener("pointercancel",E),()=>{a.removeEventListener("pointerdown",t),a.removeEventListener("pointermove",X),a.removeEventListener("pointerup",E),a.removeEventListener("pointercancel",E)}},[w,u,y,l,T]);i.useEffect(()=>{if(!u)return;const a=v(h?.current??null,"left"),g=v(b?.current??null,"right");return()=>{a?.(),g?.()}},[u,h,b,v])};function U(u,{threshold:h=.1,root:b=null,rootMargin:y="0px",once:l=!1,onEnter:w,onExit:T}={}){let d=!1,v=!1,a=null;return!u||typeof IntersectionObserver>"u"?{isVisible:d,hasBeenSeen:v,disconnect:()=>{}}:(a=new IntersectionObserver(g=>{const t=g[0];if(!t)return;const X=t.isIntersecting;d=X,X?(v||(v=!0),w?.(t),l&&a?.disconnect()):T?.(t)},{threshold:h,root:b,rootMargin:y}),a.observe(u),{get isVisible(){return d},get hasBeenSeen(){return v},disconnect:()=>a?.disconnect()})}function Z(u){if(typeof u=="number")return`0px 0px ${u}px 0px`;const h=String(u??"").trim();return/^-?\d+px$/.test(h)?`0px 0px ${h} 0px`:h||"0px"}function Q(u,{threshold:h=.1,root:b=null,rootMargin:y="0px",once:l=!1,onEnter:w,onExit:T,onForward:d,onBackward:v,pauseDelay:a=100,restoreAtTopOffset:g=100,menuCheckboxId:t}={}){const[X,E]=i.useState(!1),[f,c]=i.useState(!1),m=i.useMemo(()=>Z(y),[y]);i.useEffect(()=>{const n=u?.current;if(!n)return;const{isVisible:o,hasBeenSeen:r,disconnect:e}=U(n,{threshold:h,root:b,rootMargin:m,once:l,onEnter:s=>{E(!0),c(!0),w?.(s)},onExit:s=>{E(!1),T?.(s)}});return E(o),c(r),e},[u,h,b,m,l,w,T]);const Y=typeof d=="function"||typeof v=="function";return z({elementRef:null,scrollThreshold:5,debounceDelay:a,onScrollActivity:Y?({dir:n})=>{n==="down"?d?.():typeof window<"u"&&window.pageYOffset<=g&&v?.()}:void 0}),i.useEffect(()=>{if(!t||!Y||typeof document>"u")return;const n=document.getElementById(t);if(!n)return;const o=()=>{n.checked?v?.():typeof window<"u"&&window.pageYOffset>g?d?.():v?.()};return n.addEventListener("change",o),o(),()=>n.removeEventListener("change",o)},[t,v,d,g,Y]),l?f:X}export{z as a,B as b,K as c,J as d,H as e,j as f,Q as u};
