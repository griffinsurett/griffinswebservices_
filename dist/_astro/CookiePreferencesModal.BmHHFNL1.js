import{r,j as e}from"./react-core.INjS0cla.js";import{M as N,T as C}from"./ToggleControl.D7O1ptAg.js";import{u as T,e as h}from"./OptOutButton.GWWSRSDD.js";import{B as i,A as M}from"./accordion.CrY4pn0C.js";import{I as S}from"./ui-primitives.YsNo9MyY.js";import"./visibility-hooks.Cl1L1XKD.js";import"./engagement-hooks.ChazTTXB.js";const x=[{id:"necessary",title:"Strictly Necessary Cookies",description:"These cookies are essential for the website to function properly. They enable core functionality such as security, network management, and accessibility.",required:!0},{id:"functional",title:"Functional Cookies",description:"These cookies enable the website to provide enhanced functionality and personalization. They may be set by us or by third party providers."},{id:"performance",title:"Performance Cookies",description:"These cookies allow us to count visits and traffic sources so we can measure and improve the performance of our site."},{id:"targeting",title:"Targeting Cookies",description:"These cookies may be set through our site by our advertising partners to build a profile of your interests and show you relevant adverts."}];function P({isOpen:g,onClose:a}){const{getCookie:l,setCookie:d}=T(),[m,f]=r.useTransition(),y=r.useMemo(()=>{const t=l("cookie-consent");if(t)try{return JSON.parse(t)}catch(s){console.error("Failed to parse cookie consent:",s)}return{necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()}},[l]),[u,b]=r.useState(y),p=x.map((t,s)=>({slug:t.id,title:t.title,description:t.description,contentSlotId:`cookie-category-${s}-content`})),k=(t,s)=>{t!=="necessary"&&b(n=>({...n,[t]:typeof s=="boolean"?s:!n[t]}))},w=()=>{const t={necessary:!0,functional:!1,performance:!1,targeting:!1,timestamp:Date.now()};d("cookie-consent",JSON.stringify(t),{expires:365}),h(),window.dispatchEvent(new Event("consent-changed")),f(()=>{a()})},v=()=>{const t={...u,timestamp:Date.now()};d("cookie-consent",JSON.stringify(t),{expires:365}),h(),window.dispatchEvent(new Event("consent-changed")),f(()=>{a()})};return e.jsxs(N,{isOpen:g,onClose:a,closeButton:!0,className:"bg-bg rounded-2xl p-8 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",overlayClass:"bg-black/60",ariaLabel:"Manage cookie consent preferences",ssr:!1,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-heading mb-4",children:"Manage Consent Preferences"}),e.jsxs("p",{className:"text-text text-xs lg:text-sm leading-relaxed mb-3",children:["We use cookies and similar technologies to help personalize content and offer a better experience. You can click"," ",e.jsx(i,{variant:"link",href:"/cookie-policy",children:"here"})," ","to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer."]}),e.jsxs(i,{variant:"link",href:"/cookie-policy",children:["More information",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsx(M,{allowMultiple:!0,className:"space-y-3",items:p,showIndicator:!1,headerSlot:({item:t,id:s,expanded:n})=>{const o=x.find(c=>c.id===t.slug);if(!o)return null;const j=`${s}-toggle`;return e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center transition-all duration-500 text-lg font-semibold ${n?"bg-primary text-bg":"bg-primary/20 text-accent"}`,"aria-hidden":"true",children:e.jsx(S,{icon:n?"lucide:minus":"lucide:plus",size:"sm",className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-heading text-base flex-1",children:o.title}),e.jsxs("div",{className:"shrink-0 flex items-center gap-3",children:[o.required&&e.jsx("span",{className:"text-sm font-semibold text-primary",children:"Always Active"}),e.jsx(C,{label:o.title,description:o.description,checked:u[o.id],onChange:c=>k(o.id,c),disabled:o.required,id:j,bordered:!1,className:"py-0",hideText:!0,size:"lg"})]})]})}}),p.map((t,s)=>e.jsx("div",{id:`cookie-category-${s}-content`,style:{display:"none"},children:e.jsx("p",{className:"text-sm text-text leading-relaxed",children:t.description})},t.slug)),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-8",children:[e.jsx(i,{variant:"secondary",onClick:w,className:"flex-1",type:"button",disabled:m,children:"Reject All"}),e.jsx(i,{variant:"primary",onClick:v,className:"flex-1",animated:!1,type:"button",disabled:m,children:"Confirm My Choices"})]})]})}const D=r.memo(P);export{D as default};
