import{j as e,r as i}from"./react-core.EkFKhCmS.js";import{A}from"./AnimatedBorder.B2k6XdV4.js";import R from"./IconListItem.DRz6a6ng.js";import{g as M,u as S,L,R as D}from"./useCarouselAutoplay.D1rm-qMM.js";import{c as I}from"./useVisibility.CSoA3ZaV.js";import{A as W}from"./AnimatedElementWrapper.DsRy4ius.js";import"./Icon.BBeJOJPq.js";import"./useEngagementAutoplay.DpKITCWd.js";import"./useViewAnimation.CoM8gNl1.js";const _={src:"/assets/placeholder-D97sUwgC.jpg",width:8576,height:5696,format:"jpg"};function B({item:s,className:l="",ringDuration:x=800}){const u=s.description??"",f=s.author??s.title??"Happy Client",o=[s.role,s.company].filter(Boolean).join(", "),v=Math.max(1,Math.min(5,s.rating??5)),c=M(s.featuredImage)||_;return e.jsx("div",{className:l,children:e.jsxs(A,{variant:"progress-b-f",triggers:"hover",duration:x,borderRadius:"rounded-3xl",borderWidth:2,className:"group text-left outer-card-transition !duration-[900ms] ease-out",innerClassName:"h-100 md:h-90 lg:h-80 mx-auto px-10 flex flex-col justify-center items-start relative card-bg",children:[e.jsx("div",{className:"inner-card-style inner-card-transition inner-card-color"}),e.jsx(R,{data:{icon:"❝",description:u?`“${u}”`:void 0},layout:"vertical",alignment:"left",iconClassName:"card-icon-color icon-medium mb-5 z-10 relative",descriptionClassName:"text-text text-lg leading-relaxed mb-8 italic relative z-10",descriptionTag:"p",showTitle:!1}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 relative z-10 w-full",children:[e.jsx(R,{data:{image:c?{src:c,alt:f}:void 0,title:f,description:o||void 0},layout:"horizontal",alignment:"left",className:"gap-2",imageClassName:"w-12 h-12 rounded-full overflow-hidden flex-shrink-0",titleClassName:"h4",titleTag:"span",descriptionClassName:"text-text text-sm",descriptionTag:"p",showIcon:!1,showImage:!0,showTitle:!0,showDescription:!!o}),e.jsx("div",{className:"flex gap-1 text-center justify-center items-center",children:Array.from({length:v}).map((y,h)=>e.jsx("svg",{className:"w-5 h-5 text-accent fill-current",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},`star-${h}`))})]})]})})}function J({items:s=[],slidesPerView:l={base:1,md:2},gap:x=32,autoplay:u=!0,autoAdvanceDelay:f=4500,showArrows:o=!1,showDots:v=!0,drag:c=!1,className:y=""}){const h=i.useRef(null),w=i.useRef(null),N=i.useRef(null),[j,$]=i.useState(typeof window<"u"?window.innerWidth:1024);i.useEffect(()=>{if(typeof window>"u")return;const t=()=>$(window.innerWidth);return window.addEventListener("resize",t,{passive:!0}),()=>window.removeEventListener("resize",t)},[]);const d=i.useMemo(()=>{const t=[{key:"base",min:0},{key:"sm",min:640},{key:"md",min:768},{key:"lg",min:1024},{key:"xl",min:1280},{key:"2xl",min:1536}];let r=l.base??1;for(const{key:g,min:p}of t)j>=p&&l[g]!=null&&(r=l[g]);return Math.max(1,Number(r)||1)},[l,j]),b=i.useMemo(()=>{const t=[];for(let r=0;r<s.length;r+=d)t.push(s.slice(r,r+d));return t.length?t:[[]]},[s,d]),a=b.length,[n,m]=i.useState(0);i.useEffect(()=>{n>=a&&m(a-1)},[a,n]),S({containerRef:h,totalItems:a,currentIndex:n,setIndex:m,autoplay:u,autoplayTime:f,threshold:.3,resumeDelay:5e3,resumeTriggers:["scroll","click-outside","hover-away"],pauseOnEngage:!0,engageOnlyOnActiveItem:!0,activeItemAttr:"data-active"});const C=()=>m(t=>t===0?a-1:t-1),T=()=>m(t=>t===a-1?0:t+1),[E,k]=i.useState(!1);i.useEffect(()=>{if(a<=1)return;k(!0);const t=setTimeout(()=>k(!1),550);return()=>clearTimeout(t)},[n,a]),I({enabled:c&&a>1,leftElRef:w,rightElRef:N,onLeft:C,onRight:T,dragThreshold:Math.max(40,Math.round(j*.05)),tapThreshold:12});const z=120;return e.jsxs("div",{ref:h,className:`relative w-full ${y}`.trim(),children:[e.jsxs("div",{className:`relative grid items-center gap-x-4 md:gap-x-6 ${o&&a>1?"grid-cols-[auto_1fr_auto]":"grid-cols-1"}`,children:[o&&a>1&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(L,{onClick:C,variant:"inline"})}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"relative z-20 flex transition-transform duration-500 ease-in-out",style:{width:`${a*100}%`,transform:`translateX(-${n*100/a}%)`},children:b.map((t,r)=>e.jsx("div",{"data-carousel-item":!0,"data-active":r===n?"true":"false",className:"shrink-0",style:{width:`${100/a}%`},children:e.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${d}, minmax(0, 1fr))`,gap:x},children:t.map((g,p)=>e.jsx("div",{className:"min-w-0",children:e.jsx(W,{variant:"scale-in",animationDuration:600,animationDelay:(r*d+p)*z,threshold:.2,rootMargin:"0px 0px -50px 0px",once:!1,children:e.jsx(B,{item:g})})},`testimonial-${r}-${p}`))})},`page-${r}`))}),E&&e.jsx("div",{className:"absolute inset-0 z-30 pointer-events-auto","aria-hidden":"true"}),c&&a>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:w,className:"absolute top-0 left-0 h-full z-40 cursor-grab touch-pan-x select-none",style:{width:"50%"},"aria-hidden":"true"}),e.jsx("div",{ref:N,className:"absolute top-0 right-0 h-full z-40 cursor-grab touch-pan-x select-none",style:{width:"50%"},"aria-hidden":"true"})]})]}),o&&a>1&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(D,{onClick:T,variant:"inline"})})]}),v&&a>1&&e.jsx("nav",{className:"mt-6 flex justify-center gap-3","aria-label":"Carousel Pagination",children:Array.from({length:a}).map((t,r)=>e.jsx("button",{type:"button",onClick:()=>m(r),className:`w-3 h-3 rounded-full transition-all duration-300 ${r===n?"bg-primary scale-[1.30]":"faded-bg"}`,"aria-label":`Go to page ${r+1}`},`dot-${r}`))})]})}export{J as default};
