import{c as u}from"./visibility-hooks.CrGIozah.js";import"./react-core.INjS0cla.js";function d(e){return e instanceof HTMLVideoElement?!!(e.dataset.videoSrc||e.querySelector("source[data-video-src]")):!1}function c(e){if(e.dataset.videoLoaded==="true")return!0;let t=!1;const s=e.dataset.videoSrc;return s&&e.src!==s&&(e.src=s,t=!0),e.querySelectorAll("source[data-video-src]").forEach(r=>{const o=r.dataset.videoSrc;o&&r.src!==o&&(r.src=o,t=!0)}),t&&(e.load(),e.dataset.videoLoaded="true"),t}function l(e){if(!(e.dataset.videoAutoplay!=="false"))return;const s=e.play();typeof s?.catch=="function"&&s.catch(()=>{})}function f(e){e.dataset.videoPause!=="false"&&e.pause()}function h(e){if(!d(e))return;c(e)&&l(e)}function b(e){d(e)&&f(e)}class m{observedElements=new WeakSet;disconnectors=new WeakMap;defaultThreshold;defaultRootMargin;constructor(t={}){this.defaultThreshold=t.defaultThreshold??.1,this.defaultRootMargin=t.defaultRootMargin??"0px 0px -50px 0px"}init(){typeof window>"u"||typeof IntersectionObserver>"u"||(this.observeAll(),this.setupMutationObserver())}observeAll(){document.querySelectorAll("[data-animate]").forEach(s=>this.observe(s))}observe(t){if(this.observedElements.has(t))return;this.observedElements.add(t);const s=t.dataset.animateOnce==="true",a=parseInt(t.dataset.animateDelay||"0",10),{disconnect:r}=u(t,{threshold:this.defaultThreshold,rootMargin:this.defaultRootMargin,once:s,onEnter:()=>{h(t),a>0?setTimeout(()=>{t.dataset.visible="true"},a):t.dataset.visible="true"},onExit:()=>{s||(t.dataset.visible="false"),b(t)}});this.disconnectors.set(t,r)}setupMutationObserver(){new MutationObserver(s=>{s.forEach(a=>{a.addedNodes.forEach(r=>{r instanceof HTMLElement&&(r.hasAttribute("data-animate")&&this.observe(r),r.querySelectorAll?.("[data-animate]").forEach(o=>{this.observe(o)}))})})}).observe(document.body,{childList:!0,subtree:!0})}}let n=null;function i(e){return n||(n=new m(e),n.init(),n)}typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>i()):i());
